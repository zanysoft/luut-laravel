/*!
 * Tiny Spell Checker Pro plugin
 *
 * Copyright 2010-2021 Tiny Technologies, Inc. All rights reserved.
 *
 * Version: 2.3.1-203
 */
!function(){"use strict";function e(n){return parseInt(n,10)}function r(n,e){return 0==(e=n-e)?0:0<e?1:-1}function t(n,e,t){return{major:n,minor:e,patch:t}}function l(n){return(n=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(n))?t(e(n[1]),e(n[2]),e(n[3])):t(0,0,0)}function d(n,e){var t=r(n.major,e.major);return 0!==t||0!==(t=r(n.minor,e.minor))?t:0!==(e=r(n.patch,e.patch))?e:0}function g(n){return l([(n=n).majorVersion,n.minorVersion].join(".").split(".").slice(0,3).join("."))}function v(n,e){return!!n&&-1===d(g(n),l(e))}function w(){}function u(t,r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t(r.apply(null,n))}}function a(n){return function(){return n}}function s(n){return n}function c(r){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=o.concat(n);return r.apply(null,t)}}function b(n){n()}var y=a(!1),i=a(!0),n=function(){return f},f={fold:function(n,e){return n()},is:y,isSome:y,isNone:i,getOr:p,getOrThunk:m,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:p,orThunk:m,map:n,each:w,bind:n,exists:y,forall:i,filter:n,equals:o,equals_:o,toArray:function(){return[]},toString:a("none()")};function o(n){return n.isNone()}function m(n){return n()}function p(n){return n}function h(n){return!(null==n)}function x(n,e){return Hn.call(n,e)}function k(n,e){return-1<x(n,e)}function T(n,e){for(var t=0,r=n.length;t<r;t++){if(e(n[t],t))return!0}return!1}function S(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r}function _(n,e){for(var t=0,r=n.length;t<r;t++){e(n[t],t)}}function O(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t}function E(n,e,t){return _(n,function(n){t=e(t,n)}),t}function C(n,e){return function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return jn.some(u);if(t(u,r))break}return jn.none()}(n,e,y)}function I(n,e){for(var t=0,r=n.length;t<r;t++){if(e(n[t],t))return jn.some(t)}return jn.none()}function D(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!zn(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);Jn.apply(e,n[t])}return e}function A(n,e){return D(S(n,e))}function R(n,e){for(var t=0,r=n.length;t<r;++t){if(!0!==e(n[t],t))return!1}return!0}function L(n){return(n=Un.call(n,0)).reverse(),n}function N(n){return[n]}function j(n){return e=n,(n=0)<=n&&n<e.length?jn.some(e[n]):jn.none();var e}function P(n,e){for(var t=Yn(n),r=0,o=t.length;r<o;r++){var u=t[r];e(n[u],u)}}function M(n,t){return Gn(n,function(n,e){return{k:e,v:t(n,e)}})}function F(n,t){var r=[];return P(n,function(n,e){r.push(t(n,e))}),r}function B(n){return F(n,function(n){return n})}function z(n,e){return Qn(n,e)?jn.from(n[e]):jn.none()}function W(n,e){return function(n,e){for(var t=null!=e?e:Zn,r=0;r<n.length&&null!=t;++r)t=t[n[r]];return t}(n.split("."),e)}function q(n){return function(n,e){e=ne(n,e);if(null==e)throw new Error(n+" not available on this browser");return e}("HTMLElement",n)}function V(n){return n.dom.nodeName.toLowerCase()}function U(n){return n.dom.nodeType}function H(n){return 8===U(n)||"#comment"===V(n)}function J(n){return e=n.dom,n=W("ownerDocument.defaultView",e),q(n).prototype.isPrototypeOf(e);var e}function K(e){return function(n){return te(n)&&V(n)===e}}function X(n,e,t){if(!(Fn(t)||Wn(t)||Vn(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")}function Y(n,e,t){X(n.dom,e,t)}function $(n,e){return null===(e=n.dom.getAttribute(e))?void 0:e}function G(n,e){return jn.from($(n,e))}function Q(n,e){n.dom.removeAttribute(e)}function Z(n,e){var t=String(e).toLowerCase();return C(n,function(n){return n.search(t)})}function nn(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e}function en(n,e){return-1!==n.indexOf(e)}function tn(n){return window.matchMedia(n).matches}function rn(n,e){if(1!==(n=n.dom).nodeType)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function on(n,e){return n.dom===e.dom}function un(n){return void 0!==n.style&&qn(n.style.getPropertyValue)}function cn(n){return Xn.fromDom(n.dom.ownerDocument)}function fn(n){return oe(n)?n:cn(n)}function an(n){return jn.from(n.dom.parentNode).map(Xn.fromDom)}function sn(n,e){for(var t=qn(e)?e:y,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=Xn.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o}function ln(n){return jn.from(n.dom.previousSibling).map(Xn.fromDom)}function dn(n){return jn.from(n.dom.nextSibling).map(Xn.fromDom)}function gn(n){return S(n.dom.childNodes,Xn.fromDom)}function mn(n,e){return n=n.dom.childNodes,jn.from(n[e]).map(Xn.fromDom)}function pn(n){return n.dom.childNodes.length}function hn(n,e){return{element:n,offset:e}}function vn(n){var e=Ie(n);return ue(n=e)&&h(n.dom.host)?jn.some(e):jn.none()}function yn(n){return Xn.fromDom(n.dom.host)}function wn(n,e,t){!function(n,e,t){if(!Fn(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);un(n)&&n.style.setProperty(e,t)}(n.dom,e,t)}function bn(n,e){var t=n.dom,r=window.getComputedStyle(t).getPropertyValue(e);return""!==r||Ae(n)?r:Re(t,e)}function xn(n,e){return n=n.dom,e=Re(n,e),jn.from(e).filter(function(n){return 0<n.length})}function kn(n,e){var t=n.dom;e=e,un(t=t)&&t.style.removeProperty(e),G(n,"style").map(ge).is("")&&Q(n,"style")}function Tn(e,t){an(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})}function Sn(n,e){dn(n).fold(function(){an(n).each(function(n){Le(n,e)})},function(n){Tn(n,e)})}function _n(e,t){mn(e,0).fold(function(){Le(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})}function On(n,e){Tn(n,e),Le(e,n)}function En(e,n){_(n,function(n){Tn(e,n)})}function Cn(t,r){_(r,function(n,e){e=0===e?t:r[e-1];Sn(e,n)})}function In(e,n){_(n,function(n){Le(e,n)})}var Dn,An,Rn,Ln,Nn=function(t){function n(){return o}function e(n){return n(t)}var r=a(t),o={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:i,isNone:y,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return Nn(n(t))},each:function(n){n(t)},bind:e,exists:e,forall:e,filter:function(n){return n(t)?o:f},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(y,function(n){return e(t,n)})}};return o},jn={some:Nn,none:n,from:function(n){return null==n?f:Nn(n)}},Pn=function(t){return function(n){return n=typeof(e=n),(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===t;var e}},Mn=function(e){return function(n){return typeof n===e}},Fn=Pn("string"),Bn=Pn("object"),zn=Pn("array"),Wn=Mn("boolean"),qn=Mn("function"),Vn=Mn("number"),Un=Array.prototype.slice,Hn=Array.prototype.indexOf,Jn=Array.prototype.push,Kn=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},Xn={fromHtml:function(n,e){e=(e||document).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Kn(e.childNodes[0])},fromTag:function(n,e){n=(e||document).createElement(n);return Kn(n)},fromText:function(n,e){n=(e||document).createTextNode(n);return Kn(n)},fromDom:Kn,fromPoint:function(n,e,t){return jn.from(n.dom.elementFromPoint(e,t)).map(Kn)}},Yn=Object.keys,$n=Object.hasOwnProperty,Gn=function(n,t){var r={};return P(n,function(n,e){e=t(n,e);r[e.k]=e.v}),r},Qn=function(n,e){return $n.call(n,e)},Zn="undefined"!=typeof window?window:Function("return this;")(),ne=W,ee=function(e){return function(n){return U(n)===e}},te=ee(1),re=ee(3),oe=ee(9),ue=ee(11),ie=function(){return(ie=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},ce=function(){return fe(0,0)},fe=function(n,e){return{major:n,minor:e}},ae={nu:fe,detect:function(n,e){e=String(e).toLowerCase();return 0===n.length?ce():function(n,e){var t=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}}(n,e);if(!t)return{major:0,minor:0};n=function(n){return Number(e.replace(t,"$"+n))};return fe(n(1),n(2))}(n,e)},unknown:ce},se=function(n,t){return Z(n,t).map(function(n){var e=ae.detect(n.versionRegexes,t);return{current:n.name,version:e}})},le=function(n,t){return Z(n,t).map(function(n){var e=ae.detect(n.versionRegexes,t);return{current:n.name,version:e}})},de=function(n,e){return nn(n,e,n.length-e.length)},ge=(Dn=/^\s+|\s+$/g,function(n){return n.replace(Dn,"")}),n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pn=function(e){return function(n){return en(n,e)}},Mn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return en(n,"edge/")&&en(n,"chrome")&&en(n,"safari")&&en(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(n){return en(n,"chrome")&&!en(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return en(n,"msie")||en(n,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pn("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(en(n,"safari")||en(n,"mobile/"))&&en(n,"applewebkit")}}],ee=[{name:"Windows",search:Pn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return en(n,"iphone")||en(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Pn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pn("linux"),versionRegexes:[]},{name:"Solaris",search:Pn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],me={browsers:a(Mn),oses:a(ee)},pe="Firefox",he=function(n){var e=n.current,t=n.version,n=function(n){return function(){return e===n}};return{current:e,version:t,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(pe),isSafari:n("Safari")}},ve={unknown:function(){return he({current:void 0,version:ae.unknown()})},nu:he,edge:a("Edge"),chrome:a("Chrome"),ie:a("IE"),opera:a("Opera"),firefox:a(pe),safari:a("Safari")},ye="Windows",we="Android",be="Solaris",xe="FreeBSD",ke="ChromeOS",Te=function(n){var e=n.current,t=n.version,n=function(n){return function(){return e===n}};return{current:e,version:t,isWindows:n(ye),isiOS:n("iOS"),isAndroid:n(we),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(be),isFreeBSD:n(xe),isChromeOS:n(ke)}},Se={unknown:function(){return Te({current:void 0,version:ae.unknown()})},nu:Te,windows:a(ye),ios:a("iOS"),android:a(we),linux:a("Linux"),osx:a("OSX"),solaris:a(be),freebsd:a(xe),chromeos:a(ke)},_e=function(n,e){var t,r,o=me.browsers(),u=me.oses(),i=se(o,n).fold(ve.unknown,ve.nu),c=le(u,n).fold(Se.unknown,Se.nu);return{browser:i,os:c,deviceType:(t=i,r=n,o=e,i=(u=c).isiOS()&&!0===/ipad/i.test(r),n=u.isiOS()&&!i,e=u.isiOS()||u.isAndroid(),c=e||o("(pointer:coarse)"),o=i||!n&&e&&o("(min-device-width:768px)"),e=n||e&&!o,t=t.isSafari()&&u.isiOS()&&!1===/safari/i.test(r),r=!e&&!o&&!t,{isiPad:a(i),isiPhone:a(n),isTablet:a(o),isPhone:a(e),isTouch:a(c),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:a(t),isDesktop:a(r)})}},Oe=(Ln=!(An=function(){return _e(navigator.userAgent,tn)}),function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Ln||(Ln=!0,Rn=An.apply(null,n)),Rn}),Ee=rn,n=qn(Element.prototype.attachShadow)&&qn(Node.prototype.getRootNode),Ce=a(n),Ie=n?function(n){return Xn.fromDom(n.dom.getRootNode())}:fn,De=function(n){return h(n.dom.shadowRoot)},Ae=function(n){var e=re(n)?n.dom.parentNode:n.dom;if(null==e||null===e.ownerDocument)return!1;var t,r,o=e.ownerDocument;return vn(Xn.fromDom(e)).fold(function(){return o.body.contains(e)},(t=Ae,r=yn,function(n){return t(r(n))}))},Re=function(n,e){return un(n)?n.style.getPropertyValue(e):""},Le=function(n,e){n.dom.appendChild(e.dom)},Ne=function(n,e){var t=[];return _(gn(n),function(n){e(n)&&(t=t.concat([n])),t=t.concat(Ne(n,e))}),t};function je(n,e,t){for(var r=n.dom,o=qn(t)?t:y;r.parentNode;){r=r.parentNode;var u=Xn.fromDom(r);if(e(u))return jn.some(u);if(o(u))break}return jn.none()}function Pe(n){null!==(n=n.dom).parentNode&&n.parentNode.removeChild(n)}function Me(n){var e=gn(n);0<e.length&&En(n,e),Pe(n)}function Fe(n,e){return t=e,1!==(e=n=void 0===(e=n)?document:e.dom).nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount?[]:S(n.querySelectorAll(t),Xn.fromDom);var t}function Be(n,e,t){return je(n,function(n){return rn(n,e)},t)}function ze(n,e,t){var r;return r=Be,t=t,rn(n=n,e=e)?jn.some(n):qn(t)&&t(n)?jn.none():r(n,e,t)}function We(n){return Je.get(n)}function qe(n,e){return Je.set(n,e)}var Ve,Ue,He,Je=(Ve=re,Ue="text",{get:function(n){if(!Ve(n))throw new Error("Can only get "+Ue+" value of a "+Ue+" node");return He(n).getOr("")},getOption:He=function(n){return Ve(n)?jn.from(n.dom.nodeValue):jn.none()},set:function(n,e){if(!Ve(n))throw new Error("Can only set raw "+Ue+" value of a "+Ue+" node");n.dom.nodeValue=e}}),Ke=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Xe(){return{up:a({selector:Be,closest:ze,predicate:je,all:sn}),down:a({selector:Fe,predicate:Ne}),styles:a({get:bn,getRaw:xn,set:wn,remove:kn}),attrs:a({get:$,set:Y,remove:Q,copyTo:function(n,e){var t,n=E(n.dom.attributes,function(n,e){return n[e.name]=e.value,n},{});n=n,t=e.dom,P(n,function(n,e){X(t,e,n)})}}),insert:a({before:Tn,after:Sn,afterAll:Cn,append:Le,appendAll:In,prepend:_n,wrap:On}),remove:a({unwrap:Me,remove:Pe}),create:a({nu:Xn.fromTag,clone:function(n){return Xn.fromDom(n.dom.cloneNode(!1))},text:Xn.fromText}),query:a({comparePosition:function(n,e){return n.dom.compareDocumentPosition(e.dom)},prevSibling:ln,nextSibling:dn}),property:a({children:gn,name:V,parent:an,document:function(n){return fn(n).dom},isText:re,isComment:H,isElement:te,isSpecial:function(n){n=V(n);return k(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],n)},getText:We,setText:qe,isBoundary:function(n){return!!te(n)&&("body"===V(n)||k(Ke,V(n)))},isEmptyTag:function(n){return!!te(n)&&k(["br","img","hr","input"],V(n))},isNonEditable:function(n){return te(n)&&"false"===$(n,"contenteditable")}}),eq:on,is:Ee}}function Ye(n,e){return{element:n,offset:e}}function $e(n,e,t){return{element:n,start:e,finish:t}}function Ge(n,e){return I(n,function(n){return n.start===e})}function Qe(n,e,t){var r;return e=e=t(n,e),r=n.start,S(e,function(n){return ie(ie({},n),{start:n.start+r,finish:n.finish+r})})}function Ze(n,e){return void 0===(e=$(n,e))||""===e?[]:e.split(" ")}function nt(n){return void 0!==n.dom.classList}function et(n,e){return function(n,e,t){t=Ze(n,e).concat([t]);return Y(n,e,t.join(" ")),!0}(n,"class",e)}function tt(n,e){return r=e,0<(n=O(Ze(t=n,e="class"),function(n){return n!==r})).length?Y(t,e,n.join(" ")):Q(t,e),0;var t,r}function rt(n,e){nt(n)?n.dom.classList.add(e):et(n,e)}function ot(n){0===(nt(n)?n.dom.classList:Ze(n,"class")).length&&Q(n,"class")}function ut(n,e){nt(n)?n.dom.classList.remove(e):tt(n,e),ot(n)}function it(e,n){return e.up().closest(n,"[lang]",y).bind(function(n){n=e.attrs().get(n,"lang");return void 0===n?jn.none():jn.some(n)})}function ct(n,e){return{item:n,mode:e}}function ft(n,e,t,r){return void 0===r&&(r=Br),n.property().parent(e).map(function(n){return ct(n,r)})}function at(n,e,t,r){return Ur(n,e,t,Br,Vr.right(),r)}function st(){return{left:Vr.left,right:Vr.right}}function lt(n,e,t,r){return{item:n,start:e,finish:t,text:r}}function dt(n,e){return{items:n,abort:e}}function gt(n,e){return n=n.property().getText(e),lt(e,0,n.length,n)}function mt(n,e,t){return dt([],!0)}function pt(n,e,t){return dt([],!1)}function ht(n,e,t){var r=n.property().getText(e);return t(r).fold(function(){return dt([lt(e,0,r.length,r)],!1)},function(n){n=n[0]===n[1]?[]:[lt(e,n[0],n[1],r.substring(n[0],n[1]))];return dt(n,!0)})}function vt(n,e,t,r){return{term:function(){return new RegExp(n,r.getOr("g"))},prefix:e,suffix:t}}function yt(n,e){for(var t=e.term(),r=[],o=t.exec(n);o;){var u=o.index+e.prefix(o),i=o[0].length-e.prefix(o)-e.suffix(o);r.push({start:u,finish:u+i}),t.lastIndex=u+i,o=t.exec(n)}return r}function wt(n,e){return c(n.eq,e)}function bt(t,r,n,e){var o=t.property().children(r);if(t.eq(r,n[0]))return jn.some([n[0]]);if(t.eq(r,e[0]))return jn.some([e[0]]);function u(n){var e=L(n),n=(n=I(e,wt(t,r)).getOr(-1))<e.length-1?e[n+1]:e[n];return I(o,wt(t,n))}var n=u(n),i=u(e);return n.bind(function(t){return i.map(function(n){var e=Math.min(t,n),n=Math.max(t,n);return o.slice(e,n+1)})})}function xt(n,e,t){return{word:n,left:e,right:t}}function kt(n){return k(lo,n)}function Tt(n){var e,t=n.word;return 2<=t.length&&kt(t.charAt(t.length-1))&&!kt(t.charAt(t.length-2))?(t=(e=n).word,xt(t.substring(0,t.length-1),e.left,jn.some(t.charAt(t.length-1)))):n}function St(n){var e=n.word,t=T(go,function(n){return-1<e.indexOf(n)})?2:1,r=e.substring(0,t);return R(r,kt)&&!kt(e.charAt(t))?(t=(r=n).word,xt(t.substring(1),jn.some(t.charAt(0)),r.right)):n}function _t(r){var n=no(to()+"+"),n=ro(r,n),o=r.length;return S(n,function(n){var e=n.start,t=n.finish,n=r.substring(e,t),e=0<e?jn.some(r.charAt(e-1)):jn.none(),t=t<o?jn.some(r.charAt(t)):jn.none();return function(n){n=Tt(n);return St(n)}(xt(n,e,t))})}function Ot(i,n,e,t,c,f){for(var r=function(n){return!i.eq(n.item,e)||n.mode===zr&&!i.property().isText(n.item)&&0!==i.property().children(n.item).length},a=Pr(t),o=jn.some({item:n,mode:zr}).filter(r);o.isSome();)o.each(function(n){return e=a,t=c,r=f,o=n,u=(n=i).property().isElement(o.item)?jn.from(n.attrs().get(o.item,"lang")):jn.none(),void(n.property().isText(o.item)?e.addDetail(t(n,o.item)):n.property().isBoundary(o.item)?Nr.cata(r.assess(o.item),w,function(){return o.mode===zr?e.openBoundary(u,o.item):e.closeBoundary(u,o.item),jn.some(o)},w):n.property().isEmptyTag(o.item)?e.addEmpty(o.item):o.mode===zr?e.openInline(u,o.item):e.closeInline(u,o.item));var e,t,r,o,u}),o=o.bind(function(n){return e=f,t=n,(n=i).property().isSpecial(t.item)||n.property().isNonEditable(t.item)?jn.some({item:t.item,mode:Br}):n.property().isBoundary(t.item)?Nr.cata(e.assess(t.item),function(){return t.mode!==ft?jn.some({item:t.item,mode:Br}):jn.none()},function(){return jn.some(t)},function(){return jn.none()}):jn.some(t);var e,t}).filter(r).bind(function(n){return Jr(i,n.item,n.mode,st().right())}).filter(r);return i.property().isText(e)&&a.addDetail(c(i,e)),a.done()}function Et(f,n,e,a,s,l){return e=so(f,n,e).bind(function(n){if(0===n.length)return jn.none();var e,t,r,o,u,i,c=n[0],n=n[n.length-1];return t=c,r=n,o=a,u=s,i=l,((e=f).eq(t,r)?jn.some(t):e.property().parent(t)).map(function(n){n=Mr(e,n).getOr(o);return Ot(e,t,r,n,u,i)})}).getOr([]),{zones:S(e,function(n){var e=n.details,t=n.lang,n=S(e,function(n){return n.text}).join(""),e=S(e,function(n){return n.item});return{lang:t,words:_t(n),elements:e}})}}function Ct(n,e,t,r){var o,u,e=(e=ao(o=n,u=e,u,y),i=e.isEmpty&&(u=u,!(i=o).property().isText(u)&&0===i.down().predicate(u,i.property().isText).length),{left:e.left,right:e.right,isEmpty:i}),i=mo(e.left,e.right);return e.isEmpty?po():Et(n,e.left.item,e.right.item,t,i,r)}function It(n,e,t,r,o,u){return 1===(u=Et(n,e,t,r,u,jr.anything()).zones).length?(u=u[0],o=o,u.lang===o?jn.some(u):jn.none()):jn.none()}function Dt(n,e,t,r,o){return It(n,e,t,r,o,Kr)}function At(n,e,t,r){return n.property().isBoundary(e)?Dt(n,e,e,t,r):n.property().isEmptyTag(e)?jn.none():(o=n,u=e,t=Fr(n=t,e=r),r=ao(o,u,u,t),t=mo(r.left,r.right),r.isEmpty?ho(o,u,n,e):It(o,r.left.item,r.right.item,n,e,t));var o,u}function Rt(n){return A(n,function(n){return Ne(n,re)})}function Lt(n,e,t){return jn.from(n[0]).bind(function(n){return At(vo,n,e,t).bind(function(n){n=n.words;return 1===n.length?jn.some(n[0].word):jn.none()})})}function Nt(e,t){var r=A(e,gn),o=Rt(e);return jn.from(e[0]).bind(function(n){En(n,r);n=jn.from(o[0]);return n.each(function(n){qe(n,t)}),_(o.slice(1),function(n){qe(n,"")}),_(e,Pe),n})}function jt(n){function e(){return n.stopPropagation()}function t(){return n.preventDefault()}var r=Xn.fromDom(function(n){if(Ce()&&h(n.target)){var e=Xn.fromDom(n.target);if(te(e)&&De(e)&&n.composed&&n.composedPath){e=n.composedPath();if(e)return j(e)}}return jn.from(n.target)}(n).getOr(n.target)),o=u(t,e);return{target:r,x:n.clientX,y:n.clientY,stop:e,prevent:t,kill:o,raw:n}}function Pt(n,e,t,r,o){var u,i,r=(u=t,i=r,function(n){u(n)&&i(jt(n))});return n.dom.addEventListener(e,r,o),{unbind:c(yo,n,e,r,o)}}function Mt(n,e,t){return Pt(n,e,wo,t,!1)}function Ft(n,e){return ze(n,"."+e)}function Bt(n){return jn.from($(n,Oo))}function zt(t){return Bt(t).fold(a([t]),function(n){var e=cn(t);return Fe(e,"."+n)})}function Wt(e){var n;return(n=e,jn.from($(n,_o))).fold(a([e]),function(n){return Co(cn(e),n)})}function qt(n,e){return jn.from($(n,e))}function Vt(n){n=zt(n),_(n,function(n){ut(n,jo)})}function Ut(n){var e=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++Po+String(e)}function Ht(r,n,e){var t=A(e,function(n){return[n.start,n.finish]}),o=mr(n,t,function(n,e){return function(r,n,e){var t=r.property().getText(n),o=O(hr(t,e),function(n){return 0<n.length});if(o.length<=1)return[$e(n,0,t.length)];r.property().setText(n,o[0]);e=gr(o.slice(1),function(n,e){var t=r.create().text(n),n=$e(t,e,e+n.length);return jn.some(n)},o[0].length),t=S(e,function(n){return n.element});return r.insert().afterAll(n,t),[$e(n,0,o[0].length)].concat(e)}(r,n.element,e)});return S(e,function(n){var e=pr(o,n.start,n.finish),t=S(e,function(n){return n.element}),e=S(t,r.property().getText).join("");return{elements:t,word:n.word,exact:e}})}function Jt(t,n,o,e){return e=Er(t,n,e),A(e,function(n){var r,e=A(n,function(n){return n.fold(Sr,Sr,function(n){return[n]},Sr)}),n=S(e,t.property().getText).join(""),n=oo(n,o),e=(r=t,gr(e,function(n,e){var t=e+r.property().getText(n).length;return jn.from($e(n,e,t))}));return Ht(t,e,n)})}function Kt(n,e,t){return Mo(Fo,n,e,t)}function Xt(n,e){var t,r=A(n.elements,function(n){return Ft(n,e).fold(a([]),N)});return t=t=Ut("mce-cram"),n=n,r=jn.from(r[0]),{id:a(t),match:a(n),current:a(r)}}function Yt(n,e){var u={};return _(n,function(n){Ft(n,e.label()).filter(Ae).each(function(o){e.detail(o).each(function(n){var e=n.id(),t=n.word(),r=n.lang(),n=zt(o);0<n.length&&(u[e]={id:a(e),elements:a(n),word:a(t),lang:a(r)})})})}),u}function $t(n,e,t,r){var o=function(n){n=Rt(n);return S(n,function(n){return re(n)?We(n):""}).join("")}(n),r=Lt(n,t,r);return o===e&&r.is(e)}function Gt(n,e,o){return n=B(n),S(n,function(n){var t,r;return n.lang()===o&&$t(n.elements(),n.word(),e,n.lang())?(r=n,{fold:function(n,e){return e(r)}}):(t=n,{fold:function(n,e){return n(t)}})})}function Qt(n,e,t,r,o){e=Yt(n.elements,e),n=Gt(e,o,n.lang),_(n,function(n){function e(e){return function(n){_(n.elements(),e)}}n.fold(e(r),e(t))})}function Zt(u,i,n,e){Qt(i,No,Vt,Me,u.lang());var t,e=(e=e=Kt(i.elements,n,e),t=No.label(),S(e,function(n){return Xt(n,t)}));return A(e,function(o){return o.current().fold(function(){var n=o.match(),r=n.word;if(u.ignore(n))return[];var t,e=O(n.elements,function(n){return(J(n)?jn.some(n):an(n).filter(J)).fold(y,function(n){return"false"!==n.dom.contentEditable})}),e=(n=e,e=No.nu,Ar(Rr,n,e)||[]);return _(e,function(n){var e,t;e=n,t=o.id(),Y(e,Oo,t),rt(e,t),No.set(n,i.lang,r)}),0<e.length?[(t=e,{fold:function(n,e){return e(t)}})]:[]},function(n){return[(t=n,{fold:function(n,e){return n(t)}})];var t})})}function nr(n){return e=n,t=No.label(),n=No.ignoreLabel(),ze(e,"."+t+":not(."+n+")");var e,t}function er(n){return e=n,t=No.label(),n=No.ignoreLabel(),S(e.dom.select("."+t+":not(."+n+")"),Xn.fromDom);var e,t}function tr(n){return No.detail(n)}function rr(n,e){var t=(t=-1<(t=(n=(t=n).toLowerCase().replace("-","_")).indexOf(";"))?n.substring(0,t):n,n=ge(t),t=-1<(t=n.indexOf("_"))?n.substring(0,t):n,{full:n,languageCode:t});return e[t.full]||e[t.languageCode]||""}function or(n){return n!==qo}function ur(n){var e=Wo({zh_hk:"zh_tw",iw:"he",no:"nb",nn:"nb",en:"en",ar:"ar",ca:"ca",cs:"cs",da:"da",de:"de",el:"el",es:"es",fa:"fa",fi:"fi",fr:"fr",he:"he",hr:"hr",hu:"hu",it:"it",ja:"ja",kk:"kk",ko:"ko",nl:"nl",nb:"nb",pl:"pl",pt:"pt",pt_pt:"pt_pt",ro:"ro",ru:"ru",sl:"sl",sk:"sk",sv:"sv",th:"th",tr:"tr",uk:"uk",zh:"zh",zh_tw:"zh_tw"},Vo);return function(n,e){n=n.split(","),n=S(n,function(n){return rr(n,e)});return C(n,function(n){return""!==n})}(n.replace(/-/g,"_"),e).filter(function(n){return k(Uo,n)})}function ir(n){return n===qo?jn.some(n):ur(n)}function cr(n){return ir(n).getOr(n)}function fr(n){return z(Jo,n.toLowerCase()).orThunk(function(){return z(Jo,cr(n))}).getOrThunk(function(){return n.toUpperCase()})}function ar(n,o){return void 0===o&&(o=!0),E(n,function(n,e){var t=en(e,"=")?e.split("="):[null,e],e=t[0],r=t[1],t=o?cr(r):r.toLowerCase(),e=jn.from(e).getOrThunk(function(){return fr(r)});return n[t]=e,n},{})}function sr(r,o,u,e){return{addIgnoredWords:function(n,t){_(n,function(n){var e;h(t)?(e=cr(t),o.addToLang(e,n),u.ignore(e,n)):(o.addToGlobal(n),u.ignoreAll(n)),function(n,e,t){t=Co(n,e,t);_(t,function(n){return Me(n),0})}(Xn.fromDom(r.getDoc()),n,t)})},getLanguage:e.getLanguage,setLanguage:function(n){return e.changeLanguage(n,!1)}}}var lr,dr="\ufeff",Pn=function(i){if(!zn(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],t={};return _(i,function(n,r){var e=Yn(n);if(1!==e.length)throw new Error("one and only one name per case");var o=e[0],u=n[o];if(void 0!==t[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!zn(u))throw new Error("case arguments must be an array");c.push(o),t[o]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=t.length;if(e!==u.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+u.length+" ("+u+"), got "+e);return{fold:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+n.length);return n[r].apply(null,t)},match:function(n){var e=Yn(n);if(c.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+e.join(","));if(!R(c,function(n){return k(e,n)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+c.join(", "));return n[o].apply(null,t)},log:function(n){console.log(n,{constructors:c,constructor:o,params:t})}}}}),t},Mn=Pn([{before:["element"]},{after:["element"]},{rest:["element"]},{last:["element"]},{invalid:["element","offset"]}]),gr=(Mn.before,Mn.after,Mn.rest,Mn.last,Mn.invalid,function(n,t,e){return void 0===e&&(e=0),E(n,function(e,n){return t(n,e.len).fold(a(e),function(n){return{len:n.finish,list:e.list.concat([n])}})},{len:e,list:[]}).list}),mr=function(n,e,t){return 0===e.length?n:A(n,function(r){var n=A(e,function(n){return(t=n)>=(e=r).start&&t<=e.finish?[n-r.start]:[];var e,t});return 0<n.length?Qe(r,n,t):[r]})},pr=function(r,n,o){var n=Ge(r,n),u=Ge(r,o);return n.bind(function(n){var e,t,e=u.getOr((t=o,(e=r)[e.length-1]&&e[e.length-1].finish===t?e.length+1:-1));return-1<e?jn.some(r.slice(n,e)):jn.none()}).getOr([])},hr=function(r,n){if(0===n.length)return[r];var e=E(n,function(n,e){if(0===e)return n;var t=r.substring(n.prev,e);return{prev:e,values:n.values.concat([t])}},{prev:0,values:[]}),n=n[n.length-1];return n<r.length?e.values.concat(r.substring(n)):e.values},ee=Pn([{none:[]},{start:["element"]},{middle:["before","after"]},{end:["element"]}]),n=(ee.none,ee.start,ee.middle,ee.end,Pn([{include:["item"]},{excludeWith:["item"]},{excludeWithout:["item"]}])),vr={include:n.include,excludeWith:n.excludeWith,excludeWithout:n.excludeWithout,cata:function(n,e,t,r){return n.fold(e,t,r)}},yr=function(n,t){var r=[],o=[];return _(n,function(n){var e=t(n);vr.cata(e,function(){o.push(n)},function(){0<o.length&&r.push(o),r.push([n]),o=[]},function(){0<o.length&&r.push(o),o=[]})}),0<o.length&&r.push(o),r},Mn=Pn([{boundary:["item","universe"]},{empty:["item","universe"]},{text:["item","universe"]},{nonEditable:["item","universe"]}]),wr=y,br=i,xr=a(0),kr=a(1),ee=function(n){return ie(ie({},n),{isBoundary:function(){return n.fold(br,wr,wr,wr)},toText:function(){return n.fold(jn.none,jn.none,function(n){return jn.some(n)},jn.none)},is:function(t){return n.fold(wr,wr,function(n,e){return e.eq(n,t)},wr)},len:function(){return n.fold(xr,kr,function(n,e){return e.property().getText(n).length},kr)}})},Tr={text:u(ee,Mn.text),boundary:u(ee,Mn.boundary),empty:u(ee,Mn.empty),nonEditable:u(ee,Mn.empty),cata:function(n,e,t,r,o){return n.fold(e,t,r,o)}},Sr=a([]),_r=function(e,n,t){if(e.property().isText(n))return[Tr.text(n,e)];if(e.property().isEmptyTag(n))return[Tr.empty(n,e)];if(e.property().isNonEditable(n))return[];if(e.property().isElement(n)){var r=e.property().children(n),o=e.property().isBoundary(n)?[Tr.boundary(n,e)]:[],r=void 0!==t&&t(n)?[]:A(r,function(n){return _r(e,n,t)});return o.concat(r).concat(o)}return[]},Or=_r,Er=function(e,n,t){n=A(n,function(n){return Or(e,n,t)}),n=yr(n,function(n){return n.match({boundary:function(){return vr.excludeWithout(n)},empty:function(){return vr.excludeWith(n)},text:function(){return vr.include(n)},nonEditable:function(){return vr.excludeWithout(n)}})});return O(n,function(n){return 0<n.length})},Cr=function(n,e){if(n.property().isText(e))return Ye(e,n.property().getText(e).length);var t=n.property().children(e);return 0<t.length?Cr(n,t[t.length-1]):Ye(e,t.length)},Ir=function(n,e,t){var r=n.property().children(e);return 0<r.length&&t<r.length?Ir(n,r[t],0):0<r.length&&n.property().isElement(e)&&r.length===t?Cr(n,r[r.length-1]):Ye(e,t)},Dr=function(e,t){return{element:t,wrap:function(n){e.insert().append(t,n)}}},Ar=function(t,n,r){if(0===n.length)return n;n=O(n,function(n){return t.property().isText(n)&&0<t.property().getText(n).length});return S(n,function(n){var e=r();return t.insert().before(n,e.element),e.wrap(n),e.element})},Rr=Xe(),Lr=Ir,n=Pn([{aboveView:["item"]},{inView:["item"]},{belowView:["item"]}]),Nr=ie(ie({},n),{cata:function(n,e,t,r){return n.fold(e,t,r)}}),ee={assess:Nr.inView},jr={anything:a(ee)},Pr=function(e){function r(n){n.each(function(n){c.push(n)})}function t(n){n.each(function(n){c=c.slice(0,c.length-1)})}function o(){0<f.length&&n.push({lang:a,details:f})}function u(n){o(),f=[],a=n}function i(n){return n.or(jn.from(c[c.length-1])).getOr(e)}var c=[],n=[],f=[],a=e;return{openInline:function(n,e){var t=i(n);t!==a&&u(t),r(n)},closeInline:function(n,e){t(n)},addDetail:function(n){var e=i(jn.none());e!==a&&u(e),f.push(n)},addEmpty:function(n){var e=i(jn.none());u(e)},openBoundary:function(n,e){r(n);n=i(n);u(n)},closeBoundary:function(n,e){t(n);n=i(n);u(n)},done:function(){return o(),n.slice(0)}}},Mr=it,Fr=function(t,r){return function(n,e){e=it(n,e).getOr(t);return r!==e}},Br=function(n,e,t,r){return void 0===r&&(r=zr),t.sibling(n,e).map(function(n){return ct(n,r)})},zr=function(n,e,t,r){void 0===r&&(r=zr);e=n.property().children(e);return t.first(e).map(function(n){return ct(n,r)})},Wr=[{current:ft,next:Br,fallback:jn.none()},{current:Br,next:zr,fallback:jn.some(ft)},{current:zr,next:zr,fallback:jn.some(Br)}],qr=function(e,t,r,o,n){return void 0===n&&(n=Wr),C(n,function(n){return n.current===r}).bind(function(n){return n.current(e,t,o,n.next).orThunk(function(){return n.fallback.bind(function(n){return qr(e,t,n,o)})})})},Vr={left:function(){return{sibling:function(n,e){return n.query().prevSibling(e)},first:function(n){return 0<n.length?jn.some(n[n.length-1]):jn.none()}}},right:function(){return{sibling:function(n,e){return n.query().nextSibling(e)},first:function(n){return 0<n.length?jn.some(n[0]):jn.none()}}}},Ur=function(e,n,t,r,o,u){return qr(e,n,r,o).bind(function(n){return u(n.item)?jn.none():t(n.item)?jn.some(n.item):Ur(e,n.item,t,n.mode,o,u)})},Hr=at,Jr=qr,Kr=gt,Xr=function(n,e){return n.property().isText(e)?gt(n,e):lt(e,0,0,"")},Yr=function(n,e,t,r){return(n.property().isBoundary(e)||n.property().isEmptyTag(e)||r(n,e)?mt:n.property().isText(e)?ht:pt)(n,e,t)},Mn="\\w'\\-\\u0100-\\u017F\\u00C0-\\u00FF\ufeff\\u2018\\u2019",$r=a("[^\\w'\\-\\u0100-\\u017F\\u00C0-\\u00FF\ufeff\\u2018\\u2019]"),n=a("[\\w'\\-\\u0100-\\u017F\\u00C0-\\u00FF\ufeff\\u2018\\u2019]"),Gr=function(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Qr=function(n){return function(n){n="((?:^'?)|(?:"+$r()+"+'?))"+n+"((?:'?$)|(?:'?"+$r()+"+))";return vt(n,function(n){return 1<n.length?n[1].length:0},function(n){return 2<n.length?n[2].length:0},jn.none())}(Gr(n))},Zr=vt,no=function(n){return vt(n,a(0),a(0),jn.none())},eo=$r,to=n,ro=yt,oo=function(t,n){return function(n){n=Array.prototype.slice.call(n,0);return n.sort(function(n,e){return n.start<e.start?-1:e.start<n.start?1:0}),n}(A(n,function(e){var n=yt(t,e.pattern);return S(n,function(n){return ie(ie({},e),n)})}))},uo=new RegExp(eo()+"+","g"),io=a(0),ee=st(),Mn=ee.left(),n=ee.right(),co={left:{sibling:Mn.sibling,first:Mn.first,slicer:function(e){return function(n){n=ro(n,Zr(eo(),io,io,jn.none()));return jn.from(n[n.length-1]).map(function(n){return n.start})}(e).map(function(n){return[n+1,e.length]})}},right:{sibling:n.sibling,first:n.first,slicer:function(n){return function(n){n=n.search(uo);return-1<n?jn.some(n):jn.none()}(n).map(function(n){return[0,n]})}}},fo=function(t,n,e,r,o){e=Jr(t,n,e,r).map(function(n){var e=Yr(t,n.item,r.slicer,o),n=e.abort?[]:fo(t,n.item,n.mode,r,o);return e.items.concat(n)}).getOr([]);return O(e,function(n){return 0<n.text.trim().length})},ao=function(n,e,t,r){var o=fo(n,e,Br,co.left,r),r=fo(n,t,Br,co.right,r);return{left:0<o.length?o[o.length-1]:Xr(n,e),right:0<r.length?r[r.length-1]:Xr(n,t),isEmpty:0===o.length&&0===r.length}},so=function(e,n,t){var r=function(e,n,t,r){void 0===r&&(r=y);var o=[n].concat(e.up().all(n)),n=[t].concat(e.up().all(t)),t=function(e){return I(e,r).fold(function(){return e},function(n){return e.slice(0,n+1)})},o=t(o),u=t(n),n=C(o,function(n){return T(u,wt(e,n))});return{firstpath:o,secondpath:u,shared:n}}(e,n,t);return r.shared.bind(function(n){return bt(e,n,r.firstpath,r.secondpath)})},lo=["'","‘","’"],go=A(lo,function(e){return S(["twas"],function(n){return e+n})}),mo=function(t,r){return function(n,e){return n.eq(e,t.item)?t:n.eq(e,r.item)?r:Kr(n,e)}},po=function(){return{zones:[]}},ho=function(n,e,t,r){var o=(n.property().isText(e)?n.property().getText(e):n.property().children(e)).length,u=Lr(n,e,0),o=Lr(n,e,o);return Dt(n,u.element,o.element,t,r)},vo=Xe(),yo=function(n,e,t,r){n.dom.removeEventListener(e,t,r)},wo=i,bo=function(t){return{is:function(n){return t===n},isValue:i,isError:y,getOr:a(t),getOrThunk:a(t),getOrDie:a(t),or:function(n){return bo(t)},orThunk:function(n){return bo(t)},fold:function(n,e){return e(t)},map:function(n){return bo(n(t))},mapError:function(n){return bo(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return jn.some(t)}}},xo=function(t){return{is:y,isValue:y,isError:i,getOr:s,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(t),function(){throw new Error(n)}();var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,e){return n(t)},map:function(n){return xo(t)},mapError:function(n){return xo(n(t))},each:w,bind:function(n){return xo(t)},exists:y,forall:i,toOptional:jn.none}},ko={value:bo,error:xo,fromOption:function(n,e){return n.fold(function(){return xo(e)},bo)}},ee=function(n){var e=To(n);return{resolve:function(n){n=n.split(" ");return S(n,function(n){return So(e,n)}).join(" ")}}},To=function(n){return n.replace(/\./g,"-")},So=function(n,e){return n+"-"+e},Mn=(ee("ephox.flour"),ee("data.mce").resolve),_o=Mn("annotation"),Oo=Mn("highlight-id"),Eo=Mn("lingo"),Co=function(n,t,r){n=Fe(n,"span["+_o+"]");return O(n,function(n){var e=!h(r)||$(n,Eo)===r;return $(n,_o)===t&&e})},Io=a(_o),n=ee("mce").resolve,Do=Mn("lingo"),Ao=n("spellchecker-annotation"),Ro=n("spellchecker-word"),ee=n("spellchecker-ignore"),Lo=n("spellchecker-current"),No={nu:function(){var e,n=Xn.fromTag("span");return e=n,_([Ao,Ro],function(n){rt(e,n)}),Y(n,"aria-invalid","spelling"),Dr(Rr,n)},set:function(n,e,t){Y(n,"data-mce-bogus",1),Y(n,Io(),t),Y(n,Do,e)},setCurrent:function(n){rt(n,Lo)},unSetCurrent:function(n){ut(n,Lo)},label:a(Ao),wordLabel:a(Ro),ignoreLabel:a(ee),currentLabel:a(Lo),detail:function(r){return Bt(r).bind(function(t){return qt(r,Io()).bind(function(e){return qt(r,Do).map(function(n){return{id:a(t),word:a(e),lang:a(n),element:a(r)}})})})}},jo=n("wrap-disabled"),Po=0,Mo=function(n,e,t,r){t=S(t,function(n){return{word:n,pattern:Qr(n)}});return Jt(n,e,t,r)},Fo=Xe(),Mn=No.label,Bo=Object.prototype.hasOwnProperty,ee=function(i){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(0===n.length)throw new Error("Can't merge zero objects");for(var t={},r=0;r<n.length;r++){var o,u=n[r];for(o in u)Bo.call(u,o)&&(t[o]=i(t[o],u[o]))}return t}},zo=ee(function(n,e){return Bn(n)&&Bn(e)?zo(n,e):e}),Wo=ee(function(n,e){return e}),qo="no.language",Vo={en_au:"en_gb",en_br:"en_gb",en_bz:"en_gb",en_ca:"en_gb",en_gb:"en_gb",en_ie:"en_gb",en_in:"en_gb",en_jm:"en_gb",en_my:"en_gb",en_nz:"en_gb",en_ph:"en_gb",en_sg:"en_gb",en_tt:"en_gb",en_uk:"en_gb",en_za:"en_gb",en_zw:"en_gb",en_gb_medical:"en_gb_medical",en_us_medical:"en_us_medical",en_us:"en_us",en:"en_us"},Uo=["da","de","en","en_au","en_br","en_gb","en_uk","en_us","en_gb_medical","en_us_medical","es","fi","fr","it","nb","nl","pt","pt_pt","sv"],Ho=a(qo),Jo={ar:"Arabic",ca:"Catalan",zh:"Chinese",zh_cn:"Chinese (Simplified)",zh_tw:"Chinese (Traditional)",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",en_au:"English (Australia)",en_ca:"English (Canada)",en_gb:"English (United Kingdom)",en_us:"English (United States)",en_gb_medical:"Medical English (UK)",en_us_medical:"Medical English (US)",fa:"Farsi",fi:"Finnish",fr:"French",fr_ca:"French (Canada)",de:"German",el:"Greek",he:"Hebrew",hu:"Hungarian",it:"Italian",ja:"Japanese",kk:"Kazakh",ko:"Korean",nb:"Norwegian",no:"Norwegian",pl:"Polish",pt:"Portuguese",pt_br:"Portuguese (Brazil)",pt_pt:"Portuguese (Portugal)",ro:"Romanian",ru:"Russian",sk:"Slovak",sl:"Slovenian",es:"Spanish",es_419:"Spanish (Latin America)",es_es:"Spanish (Spain)",sv:"Swedish",tt:"Tatar",th:"Thai",tr:"Turkish",uk:"Ukrainian"};(n=lr=lr||{})[n.Error=0]="Error",n[n.Value=1]="Value";function Ko(n,e,t){return n.stype===lr.Error?e(n.serror):t(n.svalue)}function Xo(n){return{stype:lr.Value,svalue:n}}function Yo(n){return{stype:lr.Error,serror:n}}function $o(n){return Bn(n)&&100<Yn(n).length?" removed due to size":JSON.stringify(n,null,2)}function Go(n,e){return pu([{path:n,getErrorInfo:e}])}function Qo(n){var e=[],t=[];return _(n,function(n){n.fold(function(n){e.push(n)},function(n){t.push(n)})}),{errors:e,values:t}}function Zo(n,e){var t={};return t[n]=e,t}function nu(n){return u(pu,D)(n)}function eu(t,r,o){return z(r,o).fold(function(){return n=o,e=r,Go(t,function(){return'Could not find valid *strict* value for "'+n+'" in '+$o(e)});var n,e},gu)}function tu(n,e,t){return e=z(n,e).fold(function(){return t(n)},s),gu(e)}function ru(i,c,n,f){return n.fold(function(t,e,n,r){function o(n){return n=r.extract(i.concat([t]),f,n),yu(n,function(n){return Zo(e,f(n))})}function u(n){return n.fold(function(){var n=Zo(e,f(jn.none()));return gu(n)},function(n){n=r.extract(i.concat([t]),f,n);return yu(n,function(n){return Zo(e,f(jn.some(n)))})})}return n.fold(function(){return hu(eu(i,c,t),o)},function(n){return hu(tu(c,t,n),o)},function(){return hu(gu(z(c,t)),u)},function(n){return hu(function(e,n,t){n=z(e,n).map(function(n){return!0===n?t(e):n});return gu(n)}(c,t,n),u)},function(n){var e=n(c),n=yu(tu(c,t,a({})),function(n){return zo(e,n)});return hu(n,o)})},function(n,e){e=e(c);return gu(Zo(n,f(e)))})}function ou(r){return{extract:function(t,n,e){return vu(r(e,n),function(n){return e=n,Go(t,function(){return e});var e})},toString:function(){return"val"}}}function uu(r){return{extract:function(n,e,t){return function(e,t,n,r){n=S(n,function(n){return ru(e,t,n,r)});return Tu(n,{})}(n,t,r,e)},toString:function(){return"obj{\n"+S(r,function(n){return n.fold(function(n,e,t,r){return n+" -> "+r.toString()},function(n,e){return"state("+n+")"})}).join("\n")+"}"}}}function iu(n,e,t){return du(function(n,e,t,r){t=e.extract([n],t,r);return wu(t,function(n){return{input:r,errors:n}})}(n,e,s,t))}function cu(n,e,t){return iu(n,e,t).fold(function(n){throw new Error(Cu(n))},s)}var fu,au,su,lu,du=function(n){return Ko(n,ko.error,ko.value)},gu=Xo,mu=function(n){var e=[],t=[];return _(n,function(n){Ko(n,function(n){return t.push(n)},function(n){return e.push(n)})}),{values:e,errors:t}},pu=Yo,hu=function(n,e){return n.stype===lr.Value?e(n.svalue):n},vu=function(n,e){return n.stype===lr.Error?e(n.serror):n},yu=function(n,e){return n.stype===lr.Value?{stype:lr.Value,svalue:e(n.svalue)}:n},wu=function(n,e){return n.stype===lr.Error?{stype:lr.Error,serror:e(n.serror)}:n},bu=Pn([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),xu=bu.strict,ku=(bu.asOption,bu.defaultedThunk,bu.asDefaultedOptionThunk,bu.mergeWithThunk,Pn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),Zo),Tu=function(n,e){n=mu(n);return 0<n.errors.length?nu(n.errors):(n=n.values,e=e,0<n.length?gu(zo(e,Wo.apply(void 0,n))):gu(e))},Su=function(n){n=mu(n);return 0<n.errors.length?nu(n.errors):gu(n.values)},ee=Pn([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),_u=a(ou(gu)),Ou=u(function(o){return{extract:function(t,r,n){n=S(n,function(n,e){return o.extract(t.concat(["["+e+"]"]),r,n)});return Su(n)},toString:function(){return"array("+o.toString()+")"}}},uu),Eu=(ee.state,ee.field),Cu=function(n){return"Errors: \n"+function(n){n=10<n.length?n.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):n;return S(n,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()})}(n.errors).join("\n")+"\n\nInput object: "+$o(n.input)},n={},ee={exports:n};au=n,su=ee,lu=fu=void 0,function(n){"object"==typeof au&&void 0!==su?su.exports=n():"function"==typeof fu&&fu.amd?fu([],n):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}(function(){return function r(o,u,i){function c(e,n){if(!u[e]){if(!o[e]){var t="function"==typeof lu&&lu;if(!n&&t)return t(e,!0);if(f)return f(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}t=u[e]={exports:{}},o[e][0].call(t.exports,function(n){return c(o[e][1][n]||n)},t,t.exports,r,o,u,i)}return u[e].exports}for(var f="function"==typeof lu&&lu,n=0;n<i.length;n++)c(i[n]);return c}({1:[function(n,e,t){var r,o,e=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(n){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(n){r=u}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(n){o=i}}();var f,a=[],s=!1,l=-1;function d(){s&&f&&(s=!1,f.length?a=f.concat(a):l=-1,a.length&&g())}function g(){if(!s){var n=c(d);s=!0;for(var e=a.length;e;){for(f=a,a=[];++l<e;)f&&f[l].run();l=-1,e=a.length}f=null,s=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(n){try{return o.call(null,e)}catch(n){return o.call(this,e)}}}(n)}}function m(n,e){this.fun=n,this.array=e}function p(){}e.nextTick=function(n){var e=new Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];a.push(new m(n,e)),1!==a.length||s||c(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(n){return[]},e.binding=function(n){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(n){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],2:[function(n,l,e){(function(e){function r(){}function u(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(n,this)}function o(t,r){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn(function(){var n,e=1===t._state?r.onFulfilled:r.onRejected;if(null!==e){try{n=e(t._value)}catch(n){return void c(r.promise,n)}i(r.promise,n)}else(1===t._state?i:c)(r.promise,t._value)})):t._deferreds.push(r)}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if(n instanceof u)return e._state=3,e._value=n,void f(e);if("function"==typeof t)return void s((r=t,o=n,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=n,f(e)}catch(n){c(e,n)}var r,o}function c(n,e){n._state=2,n._value=e,f(n)}function f(n){2===n._state&&0===n._deferreds.length&&u._immediateFn(function(){n._handled||u._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)o(n,n._deferreds[e]);n._deferreds=null}function a(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function s(n,e){var t=!1;try{n(function(n){t||(t=!0,i(e,n))},function(n){t||(t=!0,c(e,n))})}catch(n){if(t)return;t=!0,c(e,n)}}var n,t;n=this,t=setTimeout,u.prototype.catch=function(n){return this.then(null,n)},u.prototype.then=function(n,e){var t=new this.constructor(r);return o(this,new a(n,e,t)),t},u.all=function(n){var c=Array.prototype.slice.call(n);return new u(function(o,u){if(0===c.length)return o([]);var i=c.length;for(var n=0;n<c.length;n++)!function e(t,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if("function"==typeof r)return void r.call(n,function(n){e(t,n)},u)}c[t]=n,0==--i&&o(c)}catch(n){u(n)}}(n,c[n])})},u.resolve=function(e){return e&&"object"==typeof e&&e.constructor===u?e:new u(function(n){n(e)})},u.reject=function(t){return new u(function(n,e){e(t)})},u.race=function(o){return new u(function(n,e){for(var t=0,r=o.length;t<r;t++)o[t].then(n,e)})},u._immediateFn="function"==typeof e?function(n){e(n)}:function(n){t(n,0)},u._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},u._setImmediateFn=function(n){u._immediateFn=n},u._setUnhandledRejectionFn=function(n){u._unhandledRejectionFn=n},void 0!==l&&l.exports?l.exports=u:n.Promise||(n.Promise=u)}).call(this,n("timers").setImmediate)},{timers:3}],3:[function(f,n,a){(function(n,e){var r=f("process/browser.js").nextTick,t=Function.prototype.apply,o=Array.prototype.slice,u={},i=0;function c(n,e){this._id=n,this._clearFn=e}a.setTimeout=function(){return new c(t.call(setTimeout,window,arguments),clearTimeout)},a.setInterval=function(){return new c(t.call(setInterval,window,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(n){n.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},a.enroll=function(n,e){clearTimeout(n._idleTimeoutId),n._idleTimeout=e},a.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},a._unrefActive=a.active=function(n){clearTimeout(n._idleTimeoutId);var e=n._idleTimeout;0<=e&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},e))},a.setImmediate="function"==typeof n?n:function(n){var e=i++,t=!(arguments.length<2)&&o.call(arguments,1);return u[e]=!0,r(function(){u[e]&&(t?n.apply(null,t):n.call(null),a.clearImmediate(e))}),e},a.clearImmediate="function"==typeof e?e:function(n){delete u[n]}}).call(this,f("timers").setImmediate,f("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(n,e,t){var r=n("promise-polyfill"),n="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:n.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)});function Iu(n){setTimeout(function(){throw n},0)}function Du(n){return zu(Fu(n))}function Au(){return(new Date).getTime()}function Ru(n,t){function r(n,e,t){i[n]={result:e,timestamp:t}}function o(n,e){return n-e<t}void 0===t&&(t=36e5);var u,i={};return Bn(n)&&(n=n,u=Au(),P(n,function(n,e){o(u,n.timestamp)&&r(e,n.result,n.timestamp)})),{set:r,get:function(e,n){return jn.from(i[n]).filter(function(n){return o(e,n.timestamp)}).map(function(n){return n.result})},dump:function(){return i}}}var Lu,Nu=ee.exports.boltExport,ju=function(n){var t=jn.none(),e=[],r=function(n){o()?i(n):e.push(n)},o=function(){return t.isSome()},u=function(n){_(n,i)},i=function(e){t.each(function(n){setTimeout(function(){e(n)},0)})};return n(function(n){o()||(t=jn.some(n),u(e),e=[])}),{get:r,map:function(t){return ju(function(e){r(function(n){e(t(n))})})},isReady:o}},Pu={nu:ju,pure:function(e){return ju(function(n){n(e)})}},Mu=function(t){function n(n){t().then(n,Iu)}return{map:function(n){return Mu(function(){return t().then(n)})},bind:function(e){return Mu(function(){return t().then(function(n){return e(n).toPromise()})})},anonBind:function(n){return Mu(function(){return t().then(function(){return n.toPromise()})})},toLazy:function(){return Pu.nu(n)},toCached:function(){var n=null;return Mu(function(){return null===n&&(n=t()),n})},toPromise:t,get:n}},Fu=function(n){return Mu(function(){return new Nu(n)})},Bu=function(n){return Mu(function(){return Nu.resolve(n)})},zu=function(u){return ie(ie({},u),{toCached:function(){return zu(u.toCached())},bindFuture:function(e){return zu(u.bind(function(n){return n.fold(function(n){return Bu(ko.error(n))},function(n){return e(n)})}))},bindResult:function(e){return zu(u.map(function(n){return n.bind(e)}))},mapResult:function(e){return zu(u.map(function(n){return n.map(e)}))},mapError:function(e){return zu(u.map(function(n){return n.mapError(e)}))},foldResult:function(e,t){return u.map(function(n){return n.fold(e,t)})},withTimeout:function(n,o){return zu(Fu(function(e){var t=!1,r=setTimeout(function(){t=!0,e(ko.error(o()))},n);u.get(function(n){t||(clearTimeout(r),e(n))})}))}})},n=function(n){return zu(Bu(ko.value(n)))},Wu={nu:Du,wrap:zu,pure:n,value:n,error:function(n){return zu(Bu(ko.error(n)))},fromResult:function(n){return zu(Bu(n))},fromFuture:function(n){return zu(n.map(ko.value))},fromPromise:function(n){return Du(function(e){n.then(function(n){e(ko.value(n))},function(n){e(ko.error(n))})})}};(ee=Lu=Lu||{}).JSON="json",ee.Blob="blob",ee.Text="text",ee.FormData="formdata",ee.MultipartFormData="multipart/form-data";function qu(t){return Fu(function(e){var n=new FileReader;n.onload=function(n){n=n.target?n.target.result:"";e(n)},n.readAsText(t)})}function Vu(n){try{var e=JSON.parse(n);return ko.value(e)}catch(n){return ko.error("Response was not JSON.")}}function Uu(n){return Bu(n.response)}function Hu(n,e){switch(n){case Lu.JSON:return Vu(e.response).fold(function(){return Uu(e)},Bu);case Lu.Blob:return n=e,jn.from(n.response).map(qu).getOr(Bu("no response content"));case Lu.Text:default:return Uu(e)}}function Ju(n,e){function t(){return Wu.pure(e.response)}function r(n){return Wu.error({message:n,status:e.status,responseText:e.responseText})}switch(n){case Lu.JSON:return Vu(e.response).fold(r,Wu.pure);case Lu.Blob:case Lu.Text:return t();default:return r("unknown data type")}}function Ku(n){var e=(o=n.body,jn.from(o).bind(function(n){switch(n.type){case Lu.JSON:return jn.some("application/json");case Lu.FormData:return jn.some("application/x-www-form-urlencoded; charset=UTF-8");case Lu.MultipartFormData:return jn.none();case Lu.Text:default:return jn.some("text/plain")}})),t=!0===n.credentials?jn.some(!0):jn.none(),r=function(n){switch(n){case Lu.Blob:return"application/octet-stream";case Lu.JSON:return"application/json, text/javascript";case Lu.Text:return"text/plain";default:return""}}(n.responseType)+", */*; q=0.01",o=void 0!==n.headers?n.headers:{};return{contentType:e,responseType:function(n){switch(n){case Lu.JSON:return jn.none();case Lu.Blob:return jn.some("blob");case Lu.Text:return jn.some("text");default:return jn.none()}}(n.responseType),credentials:t,accept:r,headers:o,progress:qn(n.progress)?jn.some(n.progress):jn.none()}}function Xu(n){var t=new FormData;return P(n,function(n,e){t.append(e,n)}),t}function Yu(i){return Wu.nu(function(r){var t,o=new XMLHttpRequest;o.open(i.method,(t=i.url,jn.from(i.query).map(function(n){var e=F(n,function(n,e){return encodeURIComponent(e)+"="+encodeURIComponent(n)}),n=en(t,"?")?"&":"?";return 0<e.length?t+n+e.join("&"):t}).getOr(t)),!0);var u,n=Ku(i);u=o,(n=n).contentType.each(function(n){return u.setRequestHeader("Content-Type",n)}),u.setRequestHeader("Accept",n.accept),n.credentials.each(function(n){return u.withCredentials=n}),n.responseType.each(function(n){return u.responseType=n}),n.progress.each(function(e){return u.upload.addEventListener("progress",function(n){return e(n.loaded,n.total)})}),P(n.headers,function(n,e){return u.setRequestHeader(e,n)});function e(){var e,n,t;e=i.url,n=i.responseType,Hu(n,t=o).map(function(n){return{message:0===t.status?"Unknown HTTP error (possible cross-domain request)":"Could not load url "+e+": "+t.statusText,status:t.status,responseText:n}}).get(function(n){return r(ko.error(n))})}o.onerror=e,o.onload=function(){var n;0===o.status&&(n=i.url,!nn(n,"file:",0))||o.status<100||400<=o.status?e():Ju(i.responseType,o).get(r)},n=i.body,jn.from(n).map(function(n){return n.type===Lu.JSON?JSON.stringify(n.data):n.type===Lu.FormData||n.type===Lu.MultipartFormData?Xu(n.data):n.data}).fold(function(){return o.send()},function(n){o.send(n)})})}function $u(n){return n.fold(function(n){var e=n.responseText,n=Bn(e)?e:n.message;return ko.error(n)},ko.value)}function Gu(o,u){var n,i=z(n=u,"tiny-api-key").orThunk(function(){return z(n,"tinymce-api-key")}).orThunk(function(){return z(n,"textbox-api-key")}).getOrUndefined();return{execute:function(n){var e,t,r,n=(n={url:(t=i,r=-1===(e=o).indexOf("?")?"?":"&",t?e+r+"apiKey="+encodeURIComponent(t):e),body:(n=n,{type:Lu.JSON,data:n}),responseType:Lu.JSON,credentials:!0,headers:u},Yu(ie(ie({},n),{method:"post"})).map($u));return Wu.wrap(n)},cancelCurrent:w}}function Qu(e,t){var r=[];return{execute:function(n){return(0===e?Wu.fromPromise(new Nu(function(n,e){r.push({resume:n,reject:function(){return e("InternalCancel")}})})):(--e,Wu.pure(void 0))).bindFuture(function(){return t.execute(n).map(function(n){return jn.from(r.shift()).fold(function(){return e+=1},function(n){return setTimeout(n.resume,0)}),n})})},cancelCurrent:function(){for(var n;r.length;)null!==(n=r.pop())&&void 0!==n&&n.reject()}}}function Zu(n,e,t,r,o,u){var i,c,f,a,s,l;return 0===(t=(i=e.get,c=o,t=t,f=r,!0===u?{known:{},unknown:t}:E(t,function(e,n){var t=f(n);return i(c,t).fold(function(){return{known:e.known,unknown:e.unknown.concat([n])}},function(n){n=ku(t,n);return{known:ie(ie({},e.known),n),unknown:e.unknown}})},{known:{},unknown:[]}))).unknown.length?Wu.value(t.known):(n=n,a=e,s=t.known,t=t.unknown,l=o,n(t,u).mapResult(function(n){return P(n,function(n,e){a.set(e,n,l)}),ie(ie({},s),n)}))}function ni(n){return"["+n.join(", ")+"]"}function ei(e,n,t){return T(n,function(n){return k(e,n)})?ko.error("Embed response source: "+ni(e)+" contains more than one of "+ni(Bc)):ko.value(t)}function ti(i,n){return n(function(r){var o=[],u=0;0===i.length?r([]):_(i,function(n,e){var t;n.get((t=e,function(n){o[t]=n,++u>=i.length&&r(o)}))})})}function ri(n){return ti(n,Fu)}function oi(e,r,t,n,o){return o=function(n,e){for(var t=[],r=0;r<n.length;r+=e){var o=Un.call(n,r,r+e);t.push(o)}return t}(n,o),o=S(o,function(n){n=cu("ephox.spelling.service.many.ajax.service.get",Wc,{language:t,words:n});return e.execute(n)}),o=ri(o).map(function(n){var e,t=Qo(n);if(0<t.values.length){n=S(t.values,r),n=E(n,Wo,{});return ko.value(n)}if(R(t.errors,qc))return ko.value({});if(0<t.errors.length){t=t.errors.filter((e=qc,function(n){return!e(n)})).join(", ");return ko.error("Failures communicating with the spelling server: "+t)}return ko.error("Unknown error")}),Wu.wrap(o)}function ui(t,o,n,r,e,u,i,c){function f(n){return n.check}return Zu(function(n,e){return oi(t,f,r,n,i)},n,e,s,u,void 0!==c&&c).mapResult(function(n){var t=[],r={};return P(n,function(n,e){n?o.set(e,Vc,u):r[e]=t}),r})}function ii(t,o,r,n,u,i,e){function c(n){return n.spell}return Zu(function(n,e){return oi(t,c,r,n,i)},o,n,s,u,void 0!==e&&e).mapResult(function(e){_(n,function(n){Qn(e,n)||o.set(n,Vc,u)});var r={};return P(e,function(e,t){o.get(u,t).each(function(n){n!==Vc&&(r[t]=e)})}),r})}function ci(n){void 0===n&&(n={});var t={};return P(n,function(n,e){t[e]=Ru(n)}),t}function fi(n,e){return z(n,e).getOrThunk(function(){return Ru()})}function ai(n){return e={},_(n,function(n){e[n]={}}),Yn(e).sort();var e}function si(n,e,t,r,c){void 0===c&&(c=Uc);var u=ci(r),i=ci({}),f=(r=function(n){return Qu(c.maxInFlight,(u=c.maxRetries,{execute:function(n){for(var e=function(){return i.execute(n)},t=function(n){return n.fold(e,Wu.pure)},r=e(),o=1;o<u;++o)r=r.bind(t);return Wu.wrap(r)},cancelCurrent:(i=n).cancelCurrent}));var u,i})(Gu(n,t)),o=r(Gu(e,t));return{checkMany:function(n,e){var t=ai(e),r=Au(),o=fi(i,n),e=fi(u,n);return i[n]=o,u[n]=e,ui(f,e,o,n,t,r,c.chunkSize)},correctOne:function(n,e){var t=Au(),r=fi(u,n);return u[n]=r,ii(o,r,n,[e],t,c.chunkSize)},correctMany:function(n,e){var t=ai(e),r=Au(),e=fi(u,n);return u[n]=e,ii(o,e,n,t,r,c.chunkSize)},cancelCurrent:function(){f.cancelCurrent(),o.cancelCurrent()},dumpCache:function(){return M(u,function(n){return n.dump()})}}}function li(n){return n.getParam("spellchecker_dialog",!1,"boolean")}function di(n){var e=!li(n),t=n.getParam("spellchecker_languages",Hc),n={};return Fn(t)?n=ar(t.split(",")):function(n,e){if(zn(n)){for(var t=0,r=n.length;t<r;++t)if(!e(n[t]))return!1;return!0}return!1}(t,Fn)&&(n=ar(t)),n=F(n,function(n,e){return{text:n,value:e}}),e?Jc.concat(n):n}function gi(n){var e=new RegExp(dr,"g"),t=new RegExp("[‘’]","g");return n.replace(e,"").replace(t,"'")}function mi(n,e){return{suggestions:n,ignore:e}}function pi(n){function r(n){return c.hasOwnProperty(n)&&void 0!==c[n]?c[n]:{}}function e(n,e){var t=r(n);e(t),c[n]=t}function o(n,e){return e(r(n))}function u(n,r,o){e(n,function(n){var e,t=gi(r);Qn(n,t)&&!n[t].suggestions.isNone()||(e=0<o.length?jn.some(o):jn.none(),n[t]=mi(e,!1))})}function i(n,r){e(n,function(n){var e=gi(r),t=n.hasOwnProperty(e)?n[e]:void 0,t=void 0!==t?t.suggestions:jn.none(),t=mi(t,!0);n[e]=t})}void 0===n&&(n={});var c={};return P(n,function(n,t){P(n,function(n,e){!0===n.ignore&&i(t,e),void 0!==n.suggestions&&u(t,e,n.suggestions)})}),{add:u,get:function(n,t){return o(n,function(n){var e=gi(t);return n.hasOwnProperty(e)?jn.from(n[e]):jn.none()})},ignore:i,ignoreAll:function(t){P(c,function(n,e){i(e,t)})},suggestions:function(n,t){return o(n,function(n){var e=gi(t);return(n.hasOwnProperty(e)?jn.from(n[e]):jn.none()).bind(function(n){return n.ignore?jn.none():n.suggestions})})},state:function(){return M(c,function(n,e){return M(n,function(n){return{ignore:n.ignore,suggestions:n.suggestions.getOr([])}})})},destroy:function(){c={}}}}function hi(n){var e=new Set;return _(n,function(n){return e.add(n)}),e}function vi(n,e){return Lr(Kc,n,e)}function yi(n,e,t,r){var o,u,i,c,f=(u=e,i=t,c=r,(f=cn(o=n).dom.createRange()).setStart(o.dom,u),f.setEnd(i.dom,c),f),r=on(n,t)&&e===r;return f.collapsed&&!r}function wi(n){return re(n)&&0===We(n).length}function bi(o){var u=mn(o.startContainer(),o.startOffset()).filter(K("img"));return dn(o.startContainer()).filter(K("img")).orThunk(function(){return u}).bind(function(r){return ln(o.endContainer()).filter(K("img")).bind(function(n){var e=on(r,n),t=pn(o.startContainer())===o.startOffset(),n=0===o.endOffset();return e&&(t||u.isSome())&&n?jn.some(r):jn.none()})})}function xi(n){return n.filter(function(n){return!n.collapsed()}).bind(function(n){return function(n){var e=n.startContainer();if(!on(e,n.endContainer()))return jn.none();if(K("img")(e))return jn.some(e);var t=Math.min(n.startOffset(),n.endOffset()),n=Math.max(n.startOffset(),n.endOffset()),e=mn(e,t).filter(K("img"));return n===t||n===t+1?e:Xc&&n===t+2?e.filter(function(n){return dn(n).filter(wi).isSome()}):jn.none()}(n).orThunk(function(){return bi(n)})})}function ki(n,e,t,r){var o=on(n,t)&&e===r;return{startContainer:a(n),startOffset:a(e),endContainer:a(t),endOffset:a(r),collapsed:a(o)}}function Ti(n){return n.slice(0).sort()}function Si(e,n){0<(n=O(n,function(n){return!k(e,n)})).length&&function(n){throw new Error("Unsupported keys for object: "+Ti(n).join(", "))}(n)}function _i(n,e){return{ch:n.charAt(e),offset:e}}function Oi(n){return h(n)&&void 0!==n.index&&0<=n.index?jn.some(n.index):jn.none()}function Ei(n,e){return t=e,k(["br","img","hr","input"],n.property().name(t))||n.property().isBoundary(e);var t}function Ci(e,n,t,r){var o=Lr(e,n,t);return e.property().isText(n)?jn.none():(t=e,n=o.element,o=e.property().isText,r=r,Ur(t,n,o,Br,Vr.left(),r).map(function(n){return Ye(n,e.property().getText(n).length)}))}function Ii(e,n,t){function r(n){return Ei(e,n)}return Ci(e,n,t,r).orThunk(function(){return function(n,e,t,r){t=Lr(n,e,t);return n.property().isText(e)?jn.none():at(n,t.element,n.property().isText,r).map(function(n){return Ye(n,0)})}(e,n,t,r)}).getOr(Ye(n,t))}function Di(n,e){var t=Ye(n,e);return re(n)?(n=n,e=e,uf.scanRight(cf,n,e).getOr(t)):t}function Ai(n){var e,t,r=(e=n.startContainer(),r=n.startOffset(),(0<(t=gn(e)).length&&r<t.length?hn(t[r],0):hn(e,r)).element);return te(r)&&"false"===$(r,"contenteditable")&&on(n.startContainer(),n.endContainer())&&n.startOffset()===n.endOffset()-1}function Ri(n){return re(n)||"br"===V(n)}function Li(r){function o(){var n=r.selection.getRng(),e=Xn.fromDom(n.startContainer),t=Xn.fromDom(n.endContainer);return ki(e,n.startOffset,t,n.endOffset)}function u(n,e){var t=n(),e=(e=Di((n=e).startContainer(),n.startOffset()),n=Di(n.endContainer(),n.endOffset()),ki(e.element,e.offset,n.element,n.offset)),n=o();return(!on(n.startContainer(),e.startContainer())||!on(n.endContainer(),e.endContainer())||n.startOffset()!==e.startOffset()||n.endOffset()!==e.endOffset())&&(n=e,(e=r.dom.createRng()).setStart(n.startContainer().dom,n.startOffset()),e.setEnd(n.endContainer().dom,n.endOffset()),r.selection.setRng(e)),t}function i(n,e){var t;return Ri(e.startContainer())&&Ri(e.endContainer())||(t=jn.some(e),xi(t).map(function(n){return{image:function(){return n}}}).isSome())?u(n,e):(e=n,n=r.selection.getBookmark(),e=e(),r.selection.moveToBookmark(n),e)}return{transaction:function(n){var e,t=o(),e=t.collapsed()||!ff.isIE()||yi((e=t).endContainer(),e.endOffset(),e.startContainer(),e.startOffset()),t=function(n,e){if(!e||ff.isFirefox()||Ai(n))return n;e=vi(n.endContainer(),n.endOffset()),n=vi(n.startContainer(),n.startOffset());return ki(n.element,n.offset,e.element,e.offset)}(t,e);return e?i(n,t):n()}}}function Ni(n){return n.fire("SpellcheckStart")}function ji(n){return n.fire("SpellcheckEnd")}function Pi(n){return!n.inline&&en(n.getParam("plugins","","string"),"autoresize")}function Mi(n){return!n.inline&&!Pi(n)}function Fi(n){return n.dom.getBoundingClientRect()}function Bi(u){function i(){return Mi(u)?u.getWin():window}function c(){if(Pi(u)){var e=(u.inline?u.getBody():u.getContentAreaContainer()).getBoundingClientRect();return function(n){n=Fi(n);return ie(ie({},n),{top:n.top+e.top,bottom:n.bottom+e.top})}}return Fi}return{sections:function(){var n=u.getBody();if(!n)return[];var e=i(),t=c(),r=e.innerHeight,n=Xn.fromDom(n),o=gn(n);return I(o,function(n){if(te(n)){n=t(n);return n.top<r&&0<n.bottom}}).map(function(e){var n=I(o.slice(e+1),function(n){if(te(n)){n=t(n);return!(n.top<r&&0<n.bottom)}}).map(function(n){return e+1+n}).getOr(o.length);return o.slice(e,n)}).getOr([n])},viewport:function(){var n=i(),r=n?n.innerHeight:0,o=c();return{assess:function(n){if(!te(n))return Nr.inView(n);var e,t=o(n);return(e=r,(t=t).bottom<0?Nr.aboveView:t.top>e?Nr.belowView:Nr.inView)(n)}}}}}function zi(e){var o=[];return{bind:function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");o.push(n)},unbind:function(e){o=O(o,function(n){return n!==e})},trigger:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={};_(e,function(n,e){r[n]=t[e]}),_(o,function(n){n(r)})}}}function Wi(n){return{registry:M(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:M(n,function(n){return n.trigger})}}function qi(o){function n(n){var e;32===((n=n).which||n.keyCode)&&(n=o.selection.getRng(),e=ki(Xn.fromDom(n.startContainer),n.startOffset,Xn.fromDom(n.endContainer),n.endOffset),l.runIfUnlocked(function(){return d.trigger.lookup(e.startContainer())}))}var e,t,r,u,i,c,f,a,s,l=(e=!1,{lock:function(){return e?jn.none():(e=!0,jn.some(void 0))},unlock:function(){if(!e)throw new Error("Double unlock");e=!1},runIfUnlocked:function(n){e||n()}}),d=Wi({lookup:zi(["element"]),scroll:zi([]),change:zi([])}),g=(t=function(){l.runIfUnlocked(function(){return d.trigger.scroll()})},u=null,{cancel:function(){null!==u&&(clearTimeout(u),u=null)},throttle:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];null!==u&&clearTimeout(u),u=setTimeout(function(){t.apply(null,n),u=null},r)}}),m=(i=function(){l.runIfUnlocked(function(){return d.trigger.change()})},a=f=!(c=r=1e3),s=function(){f=!0,i(),setTimeout(function(){f=!1,a&&(a=!1,s())},c)},function(){f?a=!0:s()});return o.on("keyup",n),o.on("remove",function(){o.off("keyup",n)}),o.on("init",function(){function n(n){n.selectionChange||(n=Xn.fromDom(n.element),on(e,n)||(l.runIfUnlocked(function(){return d.trigger.lookup(e)}),e=n))}var e=Xn.fromDom(o.getBody()),t=Mi(o)?o.getDoc():document,t=Xn.fromDom(t),r=Mt(t,"scroll",g.throttle);g.throttle(),o.on("NodeChange",n),o.on("SetContent change",m),o.on("remove",function(){o.off("NodeChange",n),o.off("SetContent change",m),r.unbind()})}),{events:d.registry,transact:function(n){l.lock().fold(function(){return console.warn("TinyMCE spellchecker state error")},function(){return n.get(function(){m(),l.unlock()})})}}}function Vi(n){return e=lf,nt(n=n)&&n.dom.classList.contains(e);var e}function Ui(n){var e=n;return{get:function(){return e},set:function(n){e=n}}}function Hi(e,t,r){var n=Yn(r);_(n,function(n){e.add(t,n,r[n])})}function Ji(n,e){return n.fold(y,function(n){return!n.ignore&&(n.suggestions.isSome()||!e)})}function Ki(n,e,t){var t={ignore:y,lang:a(t)},r=S(e,function(n){return n.word}),e=O(r,function(n,e){return function(n,e){e=x(n,e);return-1===e?jn.none():jn.some(e)}(r,n).filter(function(n){return n===e}).isSome()});Zt(t,n,e,y)}function Xi(n){return ko.error(new Error(n))}function Yi(n,e,t){return O(n,function(n){return!e.isWordIgnored(t,n)})}function $i(r,e,o){return Fu(function(t){var n=S(r.words,function(n){return gi(n.word)}),n=Yi(n,o,r.lang);e(n,r.lang).get(function(n){return n.fold(function(n){n=Xi(n);t(n)},function(n){var e,e=(e=r,n=n,ko.value({spelling:a(n),zone:a(e)}));t(e)})})})}function Gi(i,e,n,t,c){function r(n){var e=n.zone();Hi(i,e.lang,n.spelling());var t,r,o,n=Yn(n.spelling()),u=(t=i,r=e.lang,o=c,O(n,function(n){n=t.get(r,n);return Ji(n,o)})),n=O(e.words,function(n){n=gi(n.word);return k(u,n)});return{zone:a(e),words:a(n)}}return S(n,function(n){return $i(n,e,t).map(function(n){return n.map(r)})})}function Qi(e,r,o,u){return Fu(function(t){var n=Yi(e,u,r);o.correctionMany(n,r).get(function(n){return n.fold(function(n){n=Xi(n);t(n)},function(n){var e;t((e=r,n=n,ko.value({spelling:a(n),lang:a(e)})))})})})}function Zi(n){return function(n,e){if(0===n.length)return[];for(var t=e(n[0]),r=[],o=[],u=0,i=n.length;u<i;u++){var c=n[u],f=e(c);f!==t&&(r.push(o),o=[]),t=f,o.push(c)}return 0!==o.length&&r.push(o),r}(function(n,e){n=Un.call(n,0);return n.sort(e),n}(n,function(n,e){return n.detail.lang()<e.detail.lang()?-1:e.detail.lang()<n.detail.lang()?1:0}),function(n){return n.detail.lang()})}function nc(e,t,n,r){function o(n){Hi(e,n.lang(),n.spelling())}return n=Zi(n),n=S(n,function(n){var e=S(n,function(n){return n.detail.word()});return Qi(e,n[0].detail.lang(),t,r)}),ri(n).map(function(n){return _(n,function(n){n.each(o)}),Qo(n)})}function ec(s,u,l,i){function o(n){return S(n,function(n){var e,t,r,o,r=(e=u,t=n.lang,r=n.words,o=!0,O(r,function(n){n=e.get(t,n.word);return Ji(n,o)}));return{zone:a(n),words:a(r)}})}function c(n,e,t){n(function(){_(e,function(n){Ki(n.zone(),n.words(),t)})})}function f(t,r,o,u){var i,c,f,a;0!==t.length?(i=0,c=new Map,f=Ui(!1),a=function(){l.cancelCurrent(),f.set(!0)},_(t,function(n,e){n.get(function(n){if(c.set(e,n),s.removed&&a(),o)for(;c.has(i);)f.get()||u(c.get(i)),i+=1;else f.get()||u(n);f.get()||r(t.length===c.size,a)})}),r(!1,a)):r(!0,w)}return{local:function(n,e,t,r){e=e.zones,e=o(e);c(n,e,t),r(!0,w)},remote:function(e,n,t,r,o){n=n.zones,n=Gi(u,l.correctionMany,n,i,!0);f(n,r,o,function(n){return n.fold(w,function(n){return c(e,[n],t)})})},check:function(e,n,t,r,o){n=n.zones,n=Gi(u,l.check,n,i,!1);f(n,r,o,function(n){return n.fold(w,function(n){return c(e,[n],t)})})},fetch:function(n){return nc(u,l,n,i)}}}function tc(n,e,t,r){return n.property().isBoundary(e)?Et(n,e,e,t,Kr,r):n.property().isEmptyTag(e)?df():Ct(n,e,t,r)}function rc(n,e,t,r,o,u,i){return t=Lr(n,e,t),o=Lr(n,r,o),n.eq(t.element,o.element)?tc(n,t.element,u,i):function(n,e,t,r,o){e=ao(n,e,t,y),t=mo(e.left,e.right);return Et(n,e.left.item,e.right.item,r,t,o)}(n,t.element,o.element,u,i)}function oc(){var t=[],r=!1,o=function(){r=!0,jn.from(t.shift()).fold(function(){r=!1},function(n){n.f()(n.area(),o)})};return{enqueue:function(n,e){t.push({area:a(n),f:a(e)}),r||o()},destroy:function(){t=[]}}}function uc(n,c){function i(n,e,t,r,o,u){var i=u?{assess:function(n){return Nr.inView(n)}}:c();e(n,(e=function(n){return Ae(n)?(e=n,n=f.get(),tc(gf,e,n,i)):df();var e},n=function(n,e,t,r){return Ae(n)&&Ae(t)?(o=n,n=e,e=t,t=r,r=f.get(),rc(gf,o,n,e,t,r,i)):df();var o},t.fold(e,n)),f.get(),r,o)}var f=Ui(n),t=oc();return{run:function(n,e,t,r,o,u){i(n,e,t,r,o,u)},setLang:f.set,schedule:function(e,r,n,o,u){t.enqueue(n,function(n,t){u()?t():i(e,r,n,function(n,e){u()?e():n&&t()},o,!1)})},destroy:function(){t.destroy()}}}function ic(n){if(qn((e=n).message)&&qn(e.status)&&qn(e.responseText)){e=n.responseText();return n.message()+". Response code "+n.status()+(0===e.length?".":". Error details: "+e)}return n;var e}function cc(n,e){var t;return(de(t=n,n="/")?t:t+n)+e}function fc(n,t,o,u,e){function i(e){return function(n){return console.error(e,ic(n)),f.trigger.failed(t),n}}var r=cc(t,hf.spelling())+"/",c=si(r+"correct",r+"correction",function(n){n=(n=n).getParam("api_key")||n.getParam("spellchecker_api_key");return null===n?{}:{"tiny-api-key":n}}(n),void 0,e),f=Wi({failed:zi(["resource"])}),a=pf.nu(function(n){c.checkMany(o,["startup"]).get(n)});function s(t,r){function e(n){var e=u?t:o;return n.fold(function(n){return Bu(ko.error(n))},function(){return r(e).mapError(i("Error response from the spelling service:"))})}return a.getSync().fold(function(n){return n.bind(e)},e)}return a.get(function(n){return n.mapError(i("Unable to communicate with the spelling service:"))}),{check:function(e,n){return s(n,function(n){return c.checkMany(n,e)})},correction:function(e,n){return s(n,function(n){return c.correctOne(n,e)})},correctionMany:function(e,n){return s(n,function(n){return c.correctMany(n,e)})},events:f.registry,state:function(){return c.dumpCache()},cancelCurrent:c.cancelCurrent}}function ac(e){var u=e.gaol,t=e.editor,n=e.language,r=jn.from(t.getParam("spellchecker_handler")).getOrThunk(function(){return fc(t,e.url,n,e.multilingual,e.serverSettings)}),o=Wi({failed:zi(["resource"])});function i(){return!or(u.spelling().get())}r.events.failed.bind(function(n){o.trigger.failed(n.resource)});var c=uc(n,e.viewable.viewport),f=ec(t,e.cache,r,e.ignoreList),a=function(){!function(n){n=t.dom.select("span."+n);_(n,function(n){!function(n){var e=n.parentNode,t=n.childNodes;if(e){for(;0<t.length;)e.insertBefore(t[0],n);e.removeChild(n)}}(n)})}("mce-spellchecker-word")};return e.editor.on("remove",function(){c.destroy()}),{run:function(n,e){var t=u.spelling().get();or(t)&&(c.setLang(t),c.run(n,f.local,e,w,!1,!1),c.schedule(n,f.remote,e,!1,i))},fetch:f.fetch,check:function(n,e,t,r,o){c.setLang(u.nonOffSpelling()),c.run(n,f.check,e,t,r,o)},refresh:function(){var n=u.spelling().get();or(n)&&e.asYouType||a()},clear:a,state:r.state,events:o.registry}}function sc(r,t,e,n,o,u,i){var c=Bi(r),f=Li(r),a=ac({editor:r,gaol:n,viewable:c,cache:e,url:t,language:n.spelling().get(),multilingual:!0,asYouType:o,serverSettings:u,ignoreList:i});function s(n,e,t,r){var o=(Vi(n)?vi:Ye)(n,e),u=(Vi(t)?vi:Ye)(t,r);return n=o.element,e=o.offset,t=u.element,r=u.offset,o=yi(t,r,n,e),u=o?Ye(n,e):Ye(t,r),e=o?Ye(t,r):Ye(n,e),af.range(u.element,u.offset,e.element,e.offset)}function l(n){var e=n[0],t=n[n.length-1],n=pn(t);return s(e,0,t,n)}function d(){var n=c.sections();0<n.length&&(n=l(n),a.run(f.transaction,n))}return a.events.failed.bind(function(){var n,e=r.translate(["The spelling service was not found: ({0})",t]);n={message:e},r.fire("SpellcheckError",n),console.error(e)}),r.on("init",function(){var n=r.getBody(),n=Xn.fromDom(n);Y(n,"spellcheck",!1),a.refresh()}),r.on("remove",function(){var n=r.getBody(),n=Xn.fromDom(n);Q(n,"spellcheck"),e.destroy()}),u=a.clear,i=a.fetch,(o=o?jn.some(qi(r)):jn.none()).each(function(n){n.events.lookup.bind(function(n){n=sf(n.element);a.run(f.transaction,n)}),n.events.scroll.bind(d),n.events.change.bind(d)}),o=o.fold(function(){return function(n){return n.get(w)}},function(n){return n.transact}),{scanView:d,scanRange:function(n,e,t,r){r=s(n,e,t,r);a.run(f.transaction,r)},checkDocument:function(n,e){var t=Xn.fromDom(r.getBody()),t=gn(t);0<t.length&&(t=l(t),a.check(f.transaction,t,n,e,!0))},fetch:i,clear:u,transact:o}}function lc(n,e){return(n=n,jn.from(vf.getItem(n)).map(JSON.parse)).getOr(e)}function dc(n){var e=lc("spelling",n),n=cr(e),e=Ui(n),r=Ui("no.language"===n?"en_us":n),o=e.set,e=e.get,t={setAndCache:function(n,e){var t;t=e,n.settings.spellchecker_language=t,o(e),function(n,e){e=JSON.stringify(e);vf.setItem(n,e)}("spelling",e),or(e)&&r.set(e)},set:o,get:e};return{spelling:function(){return t},nonOffSpelling:r.get,setNonOffSpelling:r.set}}function gc(n){return"img"===V(n)?1:(e=n,Je.getOption(e).fold(function(){return gn(n).length},function(n){return n.length}));var e}function mc(t,n,e){t.undoManager.transact(function(){(function(n,e){n=nr(n).fold(a([]),zt);return Nt(n,e)})(n,e).each(function(n){var e=gc(n);t.selection.setCursorLocation(n.dom,e),t.focus()})})}function pc(n,t){return nr(n).bind(tr).map(function(n){var e=t.suggestions(n.lang(),n.word());return{detail:n,suggestions:e}})}function hc(n,e,t){n.undoManager.transact(function(){!function(n){n=nr(n).fold(a([]),zt);_(n,function(n){ut(n,No.wordLabel()),rt(n,No.ignoreLabel())})}(e)}),t=t,n.fire("SpellcheckerIgnore",{word:t})}function vc(n,e,t,r,o){o.ignore(r,t),function(n){n=nr(n).fold(a([]),Wt);_(n,Me)}(e),t=t,n.fire("SpellcheckerIgnoreAll",{word:t})}function yc(n,e,t,r,o){return r=4<r.length?o.getSubstituteItemsOverMax(n,r,4):o.getSubstituteItems(n,r),e=[o.getSeparator(),o.getIgnoreItem(n,t),o.getIgnoreAllItem(n,t,e)],r.concat(e)}function wc(n){return n=er(n),j(n).bind(tr)}function bc(n,e,t){void 0===t&&(t=100);var r,t=n.length>t?t:n.length,t=n.slice(0,t),t=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e}(S(t,function(n){return pc(n,e)}));return r={},_(t,function(n){r[n.detail.word()]=n}),B(r)}function xc(o,u,i,c,f){function a(n){((n=or(n))?i.scanView:i.clear)(),(n?Ni:ji)(o)}var n=function(n,e){i.checkDocument(n,e)},s=function(e,n,t,r){function o(){r<3?s(e,n,t,r+1):n()}i.fetch(e).get(function(n){0<n.values.length?pc(e[0].detail.element(),c).fold(function(){o()},function(n){n.suggestions.fold(function(){o()},function(n){t(n)})}):o()})};return{changeLanguage:function(n,e){void 0===e&&(e=!0);var t=ir(n).getOrDie('"'+n+'" is not a supported language code'),r=u.nonOffSpelling(),n=or(u.spelling().get());e||n?(u.spelling().setAndCache(o,t),f&&a(t)):u.setNonOffSpelling(t),r=r,(t=t)!==Ho()&&t!==r&&(t=t,r=r,o.fire("SpellcheckerLanguageChanged",{language:t,prevLanguage:r}))},getLanguage:function(){var n=u.spelling().get();return or(n)?n:u.nonOffSpelling()},toggleLanguage:function(){var n=or(u.spelling().get())?Ho():u.nonOffSpelling();u.spelling().setAndCache(o,n),a(n)},getWordsAsync:function(e){n(function(n){n&&e()},!1)},getWordsAsyncWithProgress:n,getWordsSuggestionsAsync:s}}function kc(n,e,t){e.clear(),t&&!n.removed&&e.scanView()}function Tc(t,n,r,e,o){function u(n){var e=r.spelling().get();_(n.control.items(),function(n){n.active(n.data.data===e)})}var i=S(n,function(n){return{selectable:!0,text:n.text,data:n.value,onclick:function(){e.changeLanguage(n.value)}}}),c={icon:"spellchecker",type:"button",tooltip:"Spellcheck...",onclick:function(){t.execCommand("mceSpellcheckDocument")}},f=ie(ie({},c),{type:"splitbutton",menu:i,onshow:u}),a={type:"splitbutton",tooltip:"Spellcheck",menu:i,onclick:e.toggleLanguage,onPostRender:function(n){function e(){n.control.active(or(r.spelling().get()))}e(),t.on(wf,e)},onshow:u},n={text:"Spellcheck...",context:"tools",onclick:function(){t.execCommand("mceSpellcheckDocument")}};o?(t.addButton("spellchecker",a),t.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:e.toggleLanguage,onPostRender:function(n){function e(){return n.control.active(or(r.spelling().get()))}e(),t.on(wf,e)},selectable:!0}),t.addButton("spellcheckdialog",c),t.addMenuItem("spellcheckdialog",n)):(t.addButton("spellchecker",f),t.addMenuItem("spellchecker",n)),t.addMenuItem("spellcheckerlanguage",{text:"Spellcheck Language",context:"tools",menu:i,onPostRender:function(n){n.control.on("show",function(n){u(n)})}})}function Sc(u,r){function o(n){var t;return pc(t=n,r).bind(function(e){return e.suggestions.map(function(n){return yc(t,e.detail.lang(),e.detail.word(),n,c)})}).getOr([])}var i=function(r,n){return S(n,function(n){return e=r,{text:t=n,onclick:function(){mc(u,e,t)}};var e,t})},c={getSubstituteItemsOverMax:function(n,e,t){t=e.slice(0,t);return i(n,t)},getSubstituteItems:i,getSeparator:function(){return{text:"-"}},getIgnoreItem:function(n,e){return{text:"Ignore",onclick:function(){hc(u,n,e)}}},getIgnoreAllItem:function(n,e,t){return{text:"Ignore all",onclick:function(){vc(u,n,e,t,r)}}}};u.on("contextmenu",function(n){var e=Xn.fromDom(n.target),t=o(e);0<t.length&&(n.preventDefault(),n.stopImmediatePropagation(),function(n,e){var t=tinymce.ui.Factory.create("menu",{items:e,context:"contextmenu",onautohide:function(n){-1!==n.target.className.indexOf("spellchecker")&&n.preventDefault()},onhide:function(){t.remove()}});t.renderTo(document.body);var r=bf.DOM.getPos(u.getContentAreaContainer()),o=u.dom.getPos(n.dom),e=u.dom.getRoot();"BODY"===e.nodeName?(o.x-=e.ownerDocument.documentElement.scrollLeft||e.scrollLeft,o.y-=e.ownerDocument.documentElement.scrollTop||e.scrollTop):(o.x-=e.scrollLeft,o.y-=e.scrollTop),r.x+=o.x,r.y+=o.y,t.moveTo(r.x,r.y+n.dom.offsetHeight)}(e,t))},!0)}function _c(){var e=Ui(jn.none());return{clear:function(){return e.set(jn.none())},set:function(n){return e.set(jn.some(n))},isSet:function(){return e.get().isSome()},on:function(n){return e.get().each(n)}}}function Oc(o,u,n,e,r){function i(){var n=o.translate("No misspellings found.");o.notificationManager.open({text:n,type:"info",timeout:3e3})}function c(e,t){h.on(function(n){n.find("#text")[0].value(e);n=n.find("#suggestions")[0];n.options(t),n.getEl().selectedIndex=0,n.getEl().focus()})}function f(n){var e=n.find("#text")[0],t=n.find("#change")[0],r=n.find("#ignore")[0],n=n.find("#ignoreall")[0];e.disabled(!1),t.disabled(!1),r.disabled(!1),n.disabled(!1)}function a(n){h.on(function(n){var e,t,r,o;t=(e=n).find("#text")[0],r=e.find("#suggestions")[0],o=e.find("#change")[0],n=e.find("#ignore")[0],e=e.find("#ignoreall")[0],t.value("Finding word suggestions"),t.disabled(!0),r.options([]),o.disabled(!0),n.disabled(!0),e.disabled(!0)});var n=bc(n,u),t=O(n,function(n){return n.suggestions.isNone()});r.getWordsSuggestionsAsync(t,function(){h.on(function(n){f(n)})},function(n){h.on(function(n){f(n)});var e=t[0].detail;o.selection.scrollIntoView(e.element().dom),c(e.word(),n)},0)}function s(n){n=bc(n,u),0<O(n,function(n){return n.suggestions.isNone()}).length&&r.getWordsSuggestionsAsync(n,w,w,0)}function l(n){var t,e=yf(o);0<e.length?pc((t=e)[0],u).each(function(e){e.suggestions.fold(function(){a(t)},function(n){o.selection.scrollIntoView(e.detail.element().dom),c(e.detail.word(),n),s(t)})}):(i(),n.close())}function d(){h.on(function(n){n.close()})}function g(n,e,t){return Math.min(Math.max(n,e),t)}function m(n){var e=o.getBody(),t=o.inline?o.getBody():o.getContentAreaContainer(),e=("BODY"===(e=e).nodeName&&(e=e.parentNode),e.scrollHeight>e.clientHeight?-25:-10);n.moveRel(t,"tr-tr"),n.moveBy(e,10),t=10,n=(e=n).layoutRect(),e.moveTo(g(n.x,0,window.innerWidth-n.w),g(n.y,t,window.innerHeight-n.h-t))}function p(n,e){var t,e=tinymce.ui.Factory.create("window",{layout:"flex",align:"stretch",direction:"column",title:"Spellcheck",spacing:10,padding:10,callbacks:t=v,minWidth:350,items:[{type:"label",name:"textlabel",text:"Misspelled word"},{type:"textbox",name:"text",ariaLabel:"Misspelled word",spellcheck:!1,value:n},{type:"label",name:"suggestionslabel",text:"Suggestions"},{type:"container",layout:"flex",direction:"row",align:"stretch",spacing:10,items:[{type:"selectbox",name:"suggestions",ariaLabel:"Suggestion",minWidth:150,flex:1,size:6,border:1,options:e},{type:"container",layout:"flex",flex:1,spacing:5,direction:"column",pack:"center",align:"stretch",items:[{type:"button",subtype:"primary",name:"change",text:"Change",onclick:"change"},{type:"button",name:"ignore",text:"Ignore",onclick:"ignore"},{type:"button",name:"ignoreall",text:"Ignore all",onclick:"ignoreall"}]}]}],onsubmit:function(n){n.preventDefault(),t.replace()},onclose:function(n){t.onClose()},buttons:[]});return h.set(e),e.modal=!1,e.on("open",function(){return h.on(m)}),o.on("remove",d),e.renderTo().reflow(),e.moveTo(0,0),e}var h=_c(),t=_c(),v={change:y=function(n){h.on(function(r){wc(o).each(function(n){var e=r.find("#text")[0],t=r.find("#suggestions")[0],e=e.value(),t=t.getEl().value,e=e===n.word()?t:e;mc(o,n.element(),e),l(r)})})},submit:y,ignore:function(n){h.on(function(n){wc(o).each(function(n){hc(o,n.element(),n.word())}),l(n)})},ignoreall:function(n){h.on(function(n){wc(o).each(function(n){vc(o,n.element(),n.word(),n.lang(),u)}),l(n)})},close:d,onClose:function(){kc(o,n,e),h.clear(),t.on(b)}},y={open:function(){return n.transact(Fu(function(e){h.isSet()||(n.clear(),r.getWordsAsync(function(){var r,n=yf(o);0<n.length?(t.set(e),n=(r=n)[0],pc(n,u).each(function(t){t.suggestions.fold(function(){p(t.detail.word(),[]),a(r)},function(n){var e=p(t.detail.word(),n).find("#suggestions")[0];e.options(n),e.getEl().selectedIndex=0,e.getEl().focus(),s(r)})})):(e(),i())}))}))},close:d};return o.on("ResizeWindow",function(){xf.requestAnimationFrame(function(){h.on(m)})}),y}function Ec(o,n,t,r,e){var u,i=S(n,function(n){return ie(ie({},n),{type:"choiceitem"})}),c={tooltip:"Spellcheck...",icon:"spell-check",onAction:function(){o.execCommand("mceSpellcheckDocument")}},f={tooltip:"Spellcheck...",icon:"spell-check",onAction:function(){o.execCommand("mceSpellcheckDocument")},select:function(n){return n===t.spelling().get()},fetch:function(n){n(i)},onItemAction:function(n,e){r.changeLanguage(e)}},a={tooltip:"Spellcheck",icon:"spell-check",onAction:r.toggleLanguage,onSetup:function(n){function e(){n.setActive(or(t.spelling().get()))}return e(),o.on(kf,e),function(){return o.off(kf,e)}},select:function(n){return n===t.spelling().get()},fetch:function(n){n(i)},onItemAction:function(n,e){r.changeLanguage(e)}},n={text:"Spellcheck...",icon:"spell-check",onAction:function(){o.execCommand("mceSpellcheckDocument")}};function s(n){return{type:"togglemenuitem",text:n.text,onAction:function(){return r.changeLanguage(n.value)},active:n.value===t.spelling().get()}}e?(o.ui.registry.addSplitButton("spellchecker",a),o.ui.registry.addToggleMenuItem("spellchecker",{text:"Spellcheck",icon:"spell-check",onAction:r.toggleLanguage,onSetup:function(n){function e(){return n.setActive(or(t.spelling().get()))}return e(),o.on(kf,e),function(){return o.off(kf,e)}}}),o.ui.registry.addButton("spellcheckdialog",c),o.ui.registry.addMenuItem("spellcheckdialog",n)):(o.ui.registry.addSplitButton("spellchecker",f),o.ui.registry.addMenuItem("spellchecker",n)),o.ui.registry.addNestedMenuItem("spellcheckerlanguage",{text:"Spellcheck Language",getSubmenuItems:function(){return S(i,s)}}),f=tinymce,n="5.0.3",f&&1===d(g(f),l(n))&&(n=o.getParam("spellchecker_select_languages","en,es,fr,de,pt,zh").split(","),u=ar(n,!1),o.ui.registry.addMenuButton("language",{tooltip:"Language",icon:"translate",fetch:function(n){var e,t,r=(e=o,t=u,ze(Xn.fromDom(e.selection.getNode()),"[lang]").map(function(n){n=$(n,"lang").toLowerCase();return Qn(t,n)||(t[n]=fr(n)),n}));n(F(u,function(n,t){return{type:"togglemenuitem",value:t,text:n,onSetup:function(n){return r.is(t)&&n.setActive(!0),w},onAction:function(){var n,e;e=t,(n=o).formatter.has("powerspell_language_select")||n.formatter.register("powerspell_language_select",{inline:"span",attributes:{lang:"%value"}}),n.undoManager.transact(function(){n.focus(),n.formatter.toggle("powerspell_language_select",{value:e}),n.nodeChanged()})}}}))},onSetup:function(e){function n(n){e.setActive(function(n){n=n.parents;return T(n,function(n){n=Xn.fromDom(n);return te(n)&&G(n,"lang").exists(function(n){return""!==n})})}(n))}return o.on("NodeChange",n),function(){o.off("NodeChange",n)}}}))}function Cc(r,o){function u(n,e){return{text:e,onAction:function(){mc(r,n,e)}}}var i={getSubstituteItemsOverMax:function(e,n,t){var r=n.slice(0,t),t=n.slice(t),r=S(r,function(n){return u(e,n)}),o=S(t,function(n){return u(e,n)}),t={type:"submenu",text:"More...",getSubmenuItems:function(){return o}};return r.concat([t])},getSubstituteItems:function(e,n){return S(n,function(n){return u(e,n)})},getSeparator:function(){return{type:"separator"}},getIgnoreItem:function(n,e){return{text:"Ignore",onAction:function(){hc(r,n,e)}}},getIgnoreAllItem:function(n,e,t){return{text:"Ignore all",onAction:function(){vc(r,n,e,t,o)}}}};r.ui.registry.addContextMenu("spellchecker",{update:function(n){var t,n=Xn.fromDom(n);return pc(t=n,o).bind(function(e){return e.suggestions.map(function(n){return yc(t,e.detail.lang(),e.detail.word(),n,i)})}).getOr([])}})}function Ic(t,n,r,e){return{title:"Spellcheck",body:{type:"panel",items:[{type:"input",name:"textlabel",label:"Misspelled word"},{type:"selectbox",name:"suggestions",label:"Suggestions",size:6,items:n}]},initialData:{textlabel:r,suggestions:0<e.length?e[0]:""},onClose:t.onClose,onAction:function(n,e){switch(e.name){case"change":t.replace(n,r);break;case"ignore":t.ignore(n);break;case"ignoreall":t.ignoreAll(n)}n.focus("textlabel")},buttons:[{type:"custom",primary:!0,name:"change",text:"Change"},{type:"custom",name:"ignore",text:"Ignore"},{type:"custom",name:"ignoreall",text:"Ignore all"}]}}function Dc(n,e,t){var r=S(e,function(n){return{text:n,value:n}});return Ic(n,r,t.word(),e)}function Ac(o,u,t,n,i){function c(n,e,t){function r(){n.focus("textlabel")}void 0===t&&(t=0),n.redial(e),0<t?setTimeout(r,t):r()}function r(t,r){s.get()||(o.selection.scrollIntoView(t.detail.element().dom),t.suggestions.fold(function(){var e,n=Fu(function(e){i.getWordsSuggestionsAsync([t],function(){return e(jn.none())},function(n){return e(jn.some(n))},0)}).map(function(n){return n.map(function(n){return Dc(g,n,t.detail)})});n=n,(e=r).block("Finding word suggestions"),n.get(function(n){e.unblock(),n.fold(function(){console.log("TinyMCE spellchecker fetch error")},function(n){c(e,n)})})},function(n){n=Dc(g,n,t.detail);c(r,n,a)}))}function e(){return Fu(function(n){t.clear(),s.set(!1),p.set(!0);var e=Ic(g,[],"",[]),e=o.windowManager.open(e,f);d.set(e),h(e),n()}).bind(function(){return Fu(function(n){return setTimeout(n)})}).bind(function(){return Fu(function(r){i.getWordsAsyncWithProgress(function(n,e){p.set(!n),l.set(function(){n||e(),r()});var t=yf(o),t=bc(t,u),t=O(t,function(n){return n.suggestions.isNone()});i.getWordsSuggestionsAsync(t,w,w,0);t=wc(o);(n||t.isSome())&&(m.get()(),m.set(w))},!0)})})}var f=v(tinymce,"5.6.0")?{}:{inline:"toolbar"},a=Oe().browser.isIE()?250:0,s=Ui(!0),l=_c(),d=_c(),g={replace:function(n,e){var t=n.getData(),r=t.textlabel!==e?t.textlabel:t.suggestions;wc(o).each(function(n){return mc(o,n.element(),r)}),h(n)},ignore:function(n){wc(o).each(function(n){return hc(o,n.element(),n.word())}),h(n)},ignoreAll:function(n){wc(o).each(function(n){return vc(o,n.element(),n.word(),n.lang(),u)}),h(n)},onClose:function(){l.on(b),l.clear(),d.clear(),s.set(!0),kc(o,t,n)}},m=Ui(w),p=Ui(!1),h=function(e){wc(o).bind(function(n){return pc(n.element(),u)}).fold(function(){var n;p.get()?(e.block("Finding word suggestions"),m.set(function(){e.unblock(),h(e)})):(n=o.translate("No misspellings found."),o.notificationManager.open({text:n,type:"info",timeout:3e3}),e.close())},function(n){r(n,e)})};return{open:function(){d.isSet()||t.transact(e())},close:function(){return d.on(function(n){return n.close()})}}}var Rc,Lc,Nc,n=function(n){return Eu(n,n,xu(),_u())},ee=function(n,e){return Eu(n,n,(e=e,bu.defaultedThunk(a(e))),_u())},jc="iframely",Pc="oembed",Mc="fallback",Fc="wikipedia",Bc=[jc,Pc,Mc],zc=(uu([n("url"),n("maxWidth"),ee("fresh",!1)]),uu([n("status_code"),n("sub_code"),n("msg")]),uu([n("html"),(Rc="rels",Lc=[Eu("source","source",xu(),(Nc=function(n){return zn(n)?k(e=n,jc)?ei(e,[Pc,Mc,Fc],jc):k(e,Pc)?ei(e,[jc,Mc,Fc],Pc):k(e,Mc)?ei(e,[jc,Pc,Fc],Mc):k(e,Fc)?ei(e,[jc,Pc,Mc],Fc):ko.error("Embed response source: "+ni(e)+" did not contain any of: "+ni(Bc)):ko.error("Sources was not an array: "+n);var e},ou(function(n){return Nc(n).fold(pu,gu)})))],Eu(Rc,Rc,xu(),uu(Lc)))]),[n("url"),ee("fresh",!1)]),Wc=(uu([Eu("urls","urls",xu(),Ou(zc))]),Pn([{invalid:["invalidUrl"]},{unknown:["unknownUrl"]},{valid:["validUrl"]}]),uu([n("language"),n("words")])),qc=function(n){return"InternalCancel"===n},Vc=Ut("good-spelling"),Uc={chunkSize:1500,maxRetries:3,maxInFlight:8},Hc=["en_us","en_gb","da","nl","fi","fr","de","it","nb","pt","pt_pt","es","sv"],Jc=[{value:"no.language",text:"Off"}],Kc=Xe(),Xc=Oe().browser.isFirefox(),Yc=function(r,o,u){if(0===o.length)throw new Error("You must specify at least one required field.");var t;return function(e,n){if(!zn(n))throw new Error("The "+e+" fields must be an array. Was: "+n+".");_(n,function(n){if(!Fn(n))throw new Error("The value "+n+" in the "+e+" fields was not a string.")})}("required",o),t=Ti(o),C(t,function(n,e){return e<t.length-1&&n===t[e+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}),function(e){var t=Yn(e);R(o,function(n){return k(t,n)})||function(n,e){throw new Error("All required keys ("+Ti(n).join(", ")+") were not specified. Specified keys were: "+Ti(e).join(", ")+".")}(o,t),r(o,t);var n=O(o,function(n){return!u.validate(e[n],n)});return 0<n.length&&function(n,e){throw new Error("All values need to be of type: "+e+". Keys ("+Ti(n).join(", ")+") were not.")}(n,u.label),e}},$c=st().left(),Gc=st().right(),Qc=Pn([{abort:[]},{kontinue:[]},{finish:["info"]}]),Zc=Pn([{aborted:[]},{edge:["element"]},{success:["info"]}]),nf=function(t,n,r,e,o,u,i){function c(){return i.fold(Zc.aborted,Zc.edge)}function f(e){return Jr(t,n,r,u).fold(c,function(n){return nf(t,n.item,n.mode,jn.none(),o,u,e)})}if(Ei(t,n))return c();if(t.property().isText(n)){var a=t.property().getText(n);return o(t,Qc,n,a,e).fold(c,function(){return f(jn.some(n))},Zc.success)}return f(i)},ee=function(n,e,t,r){t=Ii(n,e,t);return nf(n,t.element,Br,jn.some(t.offset),r,$c,jn.none())},n=function(n,e,t,r){t=Ii(n,e,t);return nf(n,t.element,Br,jn.some(t.offset),r,Gc,jn.none())},ef=Yc(Si,["regex","attempt"],{validate:qn,label:"function"}),tf=ee,rf=n,of=function(e,n,t){var r=y;if(!e.property().isText(n))return jn.none();var o=e.property().getText(n);return t<=o.length?jn.some(Ye(n,t)):Hr(e,n,e.property().isText,r).bind(function(n){return of(e,n,t-o.length)})},uf={previousChar:function(n,e){for(var t=e.getOr(n.length)-1;0<=t;t--)if(n.charAt(t)!==dr)return jn.some(_i(n,t));return jn.none()},nextChar:function(n,e){for(var t=e.getOr(0)+1;t<n.length;t++)if(n.charAt(t)!==dr)return jn.some(_i(n,t));return jn.none()},repeatLeft:tf,repeatRight:rf,expandLeft:function(n,e,t,r){var u=ef(r);return tf(n,e,t,function(n,e,t,r,o){o=o.getOr(r.length);return function(n,e){e.lastIndex=-1;var t=L(n).join("");return Oi(t.match(e)).map(function(n){return t.length-1-n})}(r.substring(0,o),u.regex()).fold(function(){return e.kontinue()},function(n){return u.attempt(e,t,r,n)})})},expandRight:function(n,e,t,r){var c=ef(r);return rf(n,e,t,function(n,e,t,r,o){var u,i=o.getOr(0);return(u=r.substring(i),(o=c.regex()).lastIndex=-1,Oi(u.match(o))).fold(function(){return e.kontinue()},function(n){return c.attempt(e,t,r,i+n)})})},scanRight:of},cf=Xe(),ff=Oe().browser,af=Pn([{single:["element"]},{range:["start","soffset","finish","foffset"]}]),sf=af.single,lf=Mn(),df=po,gf=Xe(),mf=function(n){var t=jn.none(),e=[],r=function(n){o()?i(n):e.push(n)},o=function(){return t.isSome()},u=function(n){_(n,i)},i=function(e){t.each(function(n){setTimeout(function(){e(n)},0)})};return n(function(n){o()||(t=jn.some(n),u(e),e=[])}),{get:r,getSync:function(){return t.fold(function(){return ko.error(Fu(r))},ko.value)},map:function(t){return mf(function(e){r(function(n){e(t(n))})})},isReady:o}},pf={nu:mf,pure:function(e){return mf(function(n){n(e)})}},hf={spelling:a("1")},vf=function(){try{var n=Zn.localStorage,e="__storage_test__";return n.setItem(e,e),n.removeItem(e),jn.some(n)}catch(n){return jn.none()}}().fold(function(){var t={};return{getItem:function(n){return t[n]},setItem:function(n,e){t[n]=e}}},function(t){return{getItem:function(n){return t.getItem("mce."+n)},setItem:function(n,e){t.setItem("mce."+n,e)}}}),yf=er,wf="SpellcheckStart SpellcheckEnd",bf=tinymce.dom.DOMUtils,xf=tinymce.util.Delay,kf="SpellcheckStart SpellcheckEnd";tinymce.PluginManager.requireLangPack("tinymcespellchecker","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hr,hu_HU,id,it,ja,kk,ko_KR,nb_NO,nl,pl,pt_BR,pt_PT,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,zh_CN,zh_TW"),tinymce.PluginManager.add("tinymcespellchecker",function(n,e){if(v(tinymce,"4.2.8"))return console.error('The "tinymcespellchecker" plugin requires at least version 4.2.8 of TinyMCE.'),{};var t=n.getParam("spellchecker_language","en_us","string"),r=n.getParam("spellchecker_rpc_url","","string"),o=pi({}),u=dc(t);n.getParam("spellchecker_active",!0,"boolean")||"no.language"===u.spelling().get()||u.spelling().set("no.language");var i,c=di(n),f=!li(n),a={chunkSize:(i=n).getParam("spellchecker_service_chunk_size",Uc.chunkSize,"number"),maxRetries:i.getParam("spellchecker_service_max_retries",Uc.maxRetries,"number"),maxInFlight:i.getParam("spellchecker_service_max_in_flight",Uc.maxInFlight,"number")},i=function(n){var t=new Set,r={};zn(n)?_(n,function(n){return t.add(n)}):P(n,function(n,e){e=cr(e);r[e]=hi(n)});return{isWordIgnored:function(n,e){return!!t.has(e)||z(r,n).fold(y,function(n){return n.has(e)})},addToLang:function(n,e){z(r,n).fold(function(){return r[n]=hi([e])},function(n){return n.add(e)})},addToGlobal:function(n){t.add(n)}}}((i=(t=n).getParam("spellchecker_whitelist",[],"array"),t.getParam("spellchecker_ignore_list",i))),s=sc(n,r,o,u,f,a,i),l=xc(n,u,s,o,f),d=v(tinymce,"5.0.0");d?(Sc(n,o),Tc(n,c,u,l,f)):(Cc(n,o),Ec(n,c,u,l,f));var g,m,p,h,c=(d?Oc:Ac)(n,o,s,f,l);return g=c,m=l,p=u,h=f,(u=n).addCommand("mceSpellcheckEnable",function(){h?m.changeLanguage(p.nonOffSpelling()):g.open()}),u.addCommand("mceSpellcheckDisable",function(){h&&m.changeLanguage(Ho()),g.close()}),u.addCommand("mceSpellcheckDialog",g.open),u.addCommand("mceSpellcheckDialogClose",g.close),u.addCommand("mceSpellcheckDocument",g.open),sr(n,i,o,l)})}();